<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TinyMUSH: netmush/cque.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TinyMUSH<span id="projectnumber">&#160;3.3</span>
   </div>
   <div id="projectbrief">TinyMUSH Server</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_2f1ec185f9ef060605cf25c562f358fe.html">netmush</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">cque.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Commands and functions for manipulating the command queue.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="constants_8h_source.html">constants.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="typedefs_8h_source.html">typedefs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="externs_8h_source.html">externs.h</a>&quot;</code><br />
<code>#include &quot;prototypes.h&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for cque.c:</div>
<div class="dyncontent">
<div class="center"><img src="cque_8c__incl.png" border="0" usemap="#anetmush_2cque_8c" alt=""/></div>
<map name="anetmush_2cque_8c" id="anetmush_2cque_8c">
<area shape="rect" title="Commands and functions for manipulating the command queue." alt="" coords="359,5,473,31"/>
<area shape="rect" title=" " alt="" coords="5,79,72,104"/>
<area shape="rect" href="constants_8h.html" title="Constants used by the engine." alt="" coords="97,79,186,104"/>
<area shape="rect" href="typedefs_8h.html" title="Type definitions for variables." alt="" coords="186,152,267,177"/>
<area shape="rect" href="macros_8h.html" title="Macro definitions." alt="" coords="379,79,453,104"/>
<area shape="rect" href="externs_8h.html" title="Prototypes for externs not defined elsewhere." alt="" coords="477,79,552,104"/>
<area shape="rect" href="prototypes_8h_source.html" title=" " alt="" coords="262,79,354,104"/>
<area shape="rect" title=" " alt="" coords="576,79,651,104"/>
<area shape="rect" title=" " alt="" coords="675,79,739,104"/>
<area shape="rect" title=" " alt="" coords="763,79,826,104"/>
<area shape="rect" title=" " alt="" coords="55,152,111,177"/>
<area shape="rect" title=" " alt="" coords="195,225,259,251"/>
<area shape="rect" title=" " alt="" coords="403,225,463,251"/>
<area shape="rect" title=" " alt="" coords="113,225,170,251"/>
<area shape="rect" title=" " alt="" coords="283,225,368,251"/>
<area shape="rect" title=" " alt="" coords="343,152,406,177"/>
<area shape="rect" title=" " alt="" coords="482,152,550,177"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad55a7ca3683a843be690613474b59f56"><td class="memItemLeft" align="right" valign="top"><a id="ad55a7ca3683a843be690613474b59f56" name="ad55a7ca3683a843be690613474b59f56"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>a_Queue</b> (dbref, int)</td></tr>
<tr class="separator:ad55a7ca3683a843be690613474b59f56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af87e981863da65afcb3501b7948d6b79"><td class="memItemLeft" align="right" valign="top"><a id="af87e981863da65afcb3501b7948d6b79" name="af87e981863da65afcb3501b7948d6b79"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>s_Queue</b> (dbref, int)</td></tr>
<tr class="separator:af87e981863da65afcb3501b7948d6b79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a519bd81245414a19da403f761bb4c3d9"><td class="memItemLeft" align="right" valign="top"><a id="a519bd81245414a19da403f761bb4c3d9" name="a519bd81245414a19da403f761bb4c3d9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>QueueMax</b> (dbref)</td></tr>
<tr class="separator:a519bd81245414a19da403f761bb4c3d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d67a4b785c60e6120656a4f61eb988a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a2d67a4b785c60e6120656a4f61eb988a">delete_qentry</a> (<a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *qptr)</td></tr>
<tr class="memdesc:a2d67a4b785c60e6120656a4f61eb988a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete and free a queue entry.  <a href="cque_8c.html#a2d67a4b785c60e6120656a4f61eb988a">More...</a><br /></td></tr>
<tr class="separator:a2d67a4b785c60e6120656a4f61eb988a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228530a31c6d75a501ac4706ed4f8838"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a228530a31c6d75a501ac4706ed4f8838">add_to</a> (dbref doer, dbref player, int am, int attrnum)</td></tr>
<tr class="memdesc:a228530a31c6d75a501ac4706ed4f8838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust an object's queue or semaphore count.  <a href="cque_8c.html#a228530a31c6d75a501ac4706ed4f8838">More...</a><br /></td></tr>
<tr class="separator:a228530a31c6d75a501ac4706ed4f8838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad42b5a68e8ff34ceedca52df77b818d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#ad42b5a68e8ff34ceedca52df77b818d5">give_que</a> (<a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *tmp)</td></tr>
<tr class="memdesc:ad42b5a68e8ff34ceedca52df77b818d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Thread a queue block onto the high or low priority queue.  <a href="cque_8c.html#ad42b5a68e8ff34ceedca52df77b818d5">More...</a><br /></td></tr>
<tr class="separator:ad42b5a68e8ff34ceedca52df77b818d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a241087fa0d439b2aa4a06372f759535b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a241087fa0d439b2aa4a06372f759535b">que_want</a> (<a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *entry, dbref ptarg, dbref otarg)</td></tr>
<tr class="memdesc:a241087fa0d439b2aa4a06372f759535b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Do we want this queue entry?  <a href="cque_8c.html#a241087fa0d439b2aa4a06372f759535b">More...</a><br /></td></tr>
<tr class="separator:a241087fa0d439b2aa4a06372f759535b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21182c864f8b56abdb1670ee36388af4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a21182c864f8b56abdb1670ee36388af4">halt_que</a> (dbref player, dbref <a class="el" href="structobject.html">object</a>)</td></tr>
<tr class="memdesc:a21182c864f8b56abdb1670ee36388af4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all queued commands from a certain player.  <a href="cque_8c.html#a21182c864f8b56abdb1670ee36388af4">More...</a><br /></td></tr>
<tr class="separator:a21182c864f8b56abdb1670ee36388af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9c417fbe72f221f0d5273cf5c4cdabd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#ac9c417fbe72f221f0d5273cf5c4cdabd">remove_waitq</a> (<a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *qptr)</td></tr>
<tr class="memdesc:ac9c417fbe72f221f0d5273cf5c4cdabd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove an entry from the wait queue.  <a href="cque_8c.html#ac9c417fbe72f221f0d5273cf5c4cdabd">More...</a><br /></td></tr>
<tr class="separator:ac9c417fbe72f221f0d5273cf5c4cdabd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a772cd93daf4b55c7093b2df561cf29cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a772cd93daf4b55c7093b2df561cf29cb">do_halt_pid</a> (dbref player, dbref cause __attribute__((unused)), int key __attribute__((unused)), char *pidstr)</td></tr>
<tr class="memdesc:a772cd93daf4b55c7093b2df561cf29cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Halt a single queue entry.  <a href="cque_8c.html#a772cd93daf4b55c7093b2df561cf29cb">More...</a><br /></td></tr>
<tr class="separator:a772cd93daf4b55c7093b2df561cf29cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9fd6734e62c1cb300681ab824f9ed05"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#ab9fd6734e62c1cb300681ab824f9ed05">do_halt</a> (dbref player, dbref cause, int key, char *target)</td></tr>
<tr class="memdesc:ab9fd6734e62c1cb300681ab824f9ed05"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command interface to halt_que.  <a href="cque_8c.html#ab9fd6734e62c1cb300681ab824f9ed05">More...</a><br /></td></tr>
<tr class="separator:ab9fd6734e62c1cb300681ab824f9ed05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ada5a41834d1fa6fda6f7270976b84b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a7ada5a41834d1fa6fda6f7270976b84b">nfy_que</a> (dbref player, dbref sem, int <a class="el" href="structattr.html">attr</a>, int key, int count)</td></tr>
<tr class="memdesc:a7ada5a41834d1fa6fda6f7270976b84b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify commands from the queue and perform or discard them.  <a href="cque_8c.html#a7ada5a41834d1fa6fda6f7270976b84b">More...</a><br /></td></tr>
<tr class="separator:a7ada5a41834d1fa6fda6f7270976b84b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a831a7828ea745e912fea47fad5516d11"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a831a7828ea745e912fea47fad5516d11">do_notify</a> (dbref player, dbref cause __attribute__((unused)), int key, char *what, char *count)</td></tr>
<tr class="memdesc:a831a7828ea745e912fea47fad5516d11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command interface to nfy_que.  <a href="cque_8c.html#a831a7828ea745e912fea47fad5516d11">More...</a><br /></td></tr>
<tr class="separator:a831a7828ea745e912fea47fad5516d11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1122a873593fa4e2597807cb59064f4d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a1122a873593fa4e2597807cb59064f4d">qpid_next</a> (void)</td></tr>
<tr class="memdesc:a1122a873593fa4e2597807cb59064f4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next available queue PID.  <a href="cque_8c.html#a1122a873593fa4e2597807cb59064f4d">More...</a><br /></td></tr>
<tr class="separator:a1122a873593fa4e2597807cb59064f4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c07cededc233d80e7d0f47f01a8589"><td class="memItemLeft" align="right" valign="top"><a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#ad7c07cededc233d80e7d0f47f01a8589">setup_que</a> (dbref player, dbref cause, char *command, char *args[], int nargs, <a class="el" href="structglobal__register__data.html">GDATA</a> *gargs)</td></tr>
<tr class="memdesc:ad7c07cededc233d80e7d0f47f01a8589"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up a queue entry.  <a href="cque_8c.html#ad7c07cededc233d80e7d0f47f01a8589">More...</a><br /></td></tr>
<tr class="separator:ad7c07cededc233d80e7d0f47f01a8589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade685b238a4a9145c479e5f8b6c5af5c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#ade685b238a4a9145c479e5f8b6c5af5c">wait_que</a> (dbref player, dbref cause, int wait, dbref sem, int <a class="el" href="structattr.html">attr</a>, char *command, char *args[], int nargs, <a class="el" href="structglobal__register__data.html">GDATA</a> *gargs)</td></tr>
<tr class="memdesc:ade685b238a4a9145c479e5f8b6c5af5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add commands to the wait or semaphore queues.  <a href="cque_8c.html#ade685b238a4a9145c479e5f8b6c5af5c">More...</a><br /></td></tr>
<tr class="separator:ade685b238a4a9145c479e5f8b6c5af5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1e6682421cadeafa52cad77f2115d1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#af1e6682421cadeafa52cad77f2115d1e">do_wait_pid</a> (dbref player, int key, char *pidstr, char *timestr)</td></tr>
<tr class="memdesc:af1e6682421cadeafa52cad77f2115d1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the wait time on an existing entry.  <a href="cque_8c.html#af1e6682421cadeafa52cad77f2115d1e">More...</a><br /></td></tr>
<tr class="separator:af1e6682421cadeafa52cad77f2115d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a944af311f78f00e7823f95e00d000734"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a944af311f78f00e7823f95e00d000734">do_wait</a> (dbref player, dbref cause, int key, char *event, char *cmd, char *cargs[], int ncargs)</td></tr>
<tr class="memdesc:a944af311f78f00e7823f95e00d000734"><td class="mdescLeft">&#160;</td><td class="mdescRight">Command interface to wait_que.  <a href="cque_8c.html#a944af311f78f00e7823f95e00d000734">More...</a><br /></td></tr>
<tr class="separator:a944af311f78f00e7823f95e00d000734"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b181f9619cd91f255893143c1180d19"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a7b181f9619cd91f255893143c1180d19">que_next</a> (void)</td></tr>
<tr class="memdesc:a7b181f9619cd91f255893143c1180d19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the time in seconds until the next command should be run from the queue.  <a href="cque_8c.html#a7b181f9619cd91f255893143c1180d19">More...</a><br /></td></tr>
<tr class="separator:a7b181f9619cd91f255893143c1180d19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9f12519d1da35e7f73002ccdd88cf1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#ae9f12519d1da35e7f73002ccdd88cf1c">do_second</a> (void)</td></tr>
<tr class="memdesc:ae9f12519d1da35e7f73002ccdd88cf1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the wait and semaphore queues for commands to remove.  <a href="cque_8c.html#ae9f12519d1da35e7f73002ccdd88cf1c">More...</a><br /></td></tr>
<tr class="separator:ae9f12519d1da35e7f73002ccdd88cf1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb4ac332d759e27de939b63e504e3d7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#abb4ac332d759e27de939b63e504e3d7b">do_top</a> (int ncmds)</td></tr>
<tr class="memdesc:abb4ac332d759e27de939b63e504e3d7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute the command at the top of the queue.  <a href="cque_8c.html#abb4ac332d759e27de939b63e504e3d7b">More...</a><br /></td></tr>
<tr class="separator:abb4ac332d759e27de939b63e504e3d7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1fc4d917206108ebc53d0291e268aa1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#ae1fc4d917206108ebc53d0291e268aa1">show_que</a> (dbref player, int key, <a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *queue, int *qtot, int *qent, int *qdel, dbref player_targ, dbref obj_targ, const char *header)</td></tr>
<tr class="memdesc:ae1fc4d917206108ebc53d0291e268aa1"><td class="mdescLeft">&#160;</td><td class="mdescRight">tell player what commands they have pending in the queue  <a href="cque_8c.html#ae1fc4d917206108ebc53d0291e268aa1">More...</a><br /></td></tr>
<tr class="separator:ae1fc4d917206108ebc53d0291e268aa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec2278a82eca1d7b8a9db3d13d3ee3cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#aec2278a82eca1d7b8a9db3d13d3ee3cd">do_ps</a> (dbref player, dbref cause __attribute__((unused)), int key, char *target)</td></tr>
<tr class="memdesc:aec2278a82eca1d7b8a9db3d13d3ee3cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">List queue.  <a href="cque_8c.html#aec2278a82eca1d7b8a9db3d13d3ee3cd">More...</a><br /></td></tr>
<tr class="separator:aec2278a82eca1d7b8a9db3d13d3ee3cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92a6a9abea3f4d370dfbd7e1c6e772fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="cque_8c.html#a92a6a9abea3f4d370dfbd7e1c6e772fd">do_queue</a> (dbref player, dbref cause __attribute__((unused)), int key, char *arg)</td></tr>
<tr class="memdesc:a92a6a9abea3f4d370dfbd7e1c6e772fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue management.  <a href="cque_8c.html#a92a6a9abea3f4d370dfbd7e1c6e772fd">More...</a><br /></td></tr>
<tr class="separator:a92a6a9abea3f4d370dfbd7e1c6e772fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adaea7b5a3fcac12a9e9885dc8f875bc6"><td class="memItemLeft" align="right" valign="top"><a id="adaea7b5a3fcac12a9e9885dc8f875bc6" name="adaea7b5a3fcac12a9e9885dc8f875bc6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>qpid_top</b> = 1</td></tr>
<tr class="separator:adaea7b5a3fcac12a9e9885dc8f875bc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Commands and functions for manipulating the command queue. </p>
<dl class="section author"><dt>Author</dt><dd>TinyMUSH development team (<a href="https://github.com/TinyMUSH">https://github.com/TinyMUSH</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>3.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-12-26</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 1989-2021 TinyMUSH development team. You may distribute under the terms the Artistic License, as specified in the COPYING file. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a228530a31c6d75a501ac4706ed4f8838" name="a228530a31c6d75a501ac4706ed4f8838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a228530a31c6d75a501ac4706ed4f8838">&#9670;&#160;</a></span>add_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int add_to </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>doer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>am</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attrnum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust an object's queue or semaphore count. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">doer</td><td>Dbref of doer </td></tr>
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">am</td><td>Attribute map </td></tr>
    <tr><td class="paramname">attrnum</td><td>Attribute number </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

</div>
</div>
<a id="a2d67a4b785c60e6120656a4f61eb988a" name="a2d67a4b785c60e6120656a4f61eb988a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d67a4b785c60e6120656a4f61eb988a">&#9670;&#160;</a></span>delete_qentry()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delete_qentry </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *&#160;</td>
          <td class="paramname"><em>qptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete and free a queue entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">qptr</td><td>Queue entry </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab9fd6734e62c1cb300681ab824f9ed05" name="ab9fd6734e62c1cb300681ab824f9ed05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9fd6734e62c1cb300681ab824f9ed05">&#9670;&#160;</a></span>do_halt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_halt </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command interface to halt_que. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">target</td><td>Target to halt </td></tr>
  </table>
  </dd>
</dl>
<p >Figure out what to halt</p>

</div>
</div>
<a id="a772cd93daf4b55c7093b2df561cf29cb" name="a772cd93daf4b55c7093b2df561cf29cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a772cd93daf4b55c7093b2df561cf29cb">&#9670;&#160;</a></span>do_halt_pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_halt_pid </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int key &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pidstr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Halt a single queue entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">pidstr</td><td>Pîd of the queue </td></tr>
  </table>
  </dd>
</dl>
<p >Changing the player to NOTHING will flag this as halted, but we may have to delete it from the wait queue as well as the semaphore queue.</p>

</div>
</div>
<a id="a831a7828ea745e912fea47fad5516d11" name="a831a7828ea745e912fea47fad5516d11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a831a7828ea745e912fea47fad5516d11">&#9670;&#160;</a></span>do_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_notify </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>what</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command interface to nfy_que. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">what</td><td>Command </td></tr>
    <tr><td class="paramname">count</td><td>Counter </td></tr>
  </table>
  </dd>
</dl>
<p >Do they have permission to set this attribute?</p>

</div>
</div>
<a id="aec2278a82eca1d7b8a9db3d13d3ee3cd" name="aec2278a82eca1d7b8a9db3d13d3ee3cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec2278a82eca1d7b8a9db3d13d3ee3cd">&#9670;&#160;</a></span>do_ps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_ps </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">target</td><td>Target </td></tr>
  </table>
  </dd>
</dl>
<p >Figure out what to list the queue for</p>
<p >Go do it</p>
<p >Display stats</p>

</div>
</div>
<a id="a92a6a9abea3f4d370dfbd7e1c6e772fd" name="a92a6a9abea3f4d370dfbd7e1c6e772fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92a6a9abea3f4d370dfbd7e1c6e772fd">&#9670;&#160;</a></span>do_queue()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_queue </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>arg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue management. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">arg</td><td>Arguments </td></tr>
  </table>
  </dd>
</dl>
<p >Handle the wait queue</p>
<p >Handle the semaphore queue</p>

</div>
</div>
<a id="ae9f12519d1da35e7f73002ccdd88cf1c" name="ae9f12519d1da35e7f73002ccdd88cf1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9f12519d1da35e7f73002ccdd88cf1c">&#9670;&#160;</a></span>do_second()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_second </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check the wait and semaphore queues for commands to remove. </p>
<p >move contents of low priority queue onto end of normal one this helps to keep objects from getting out of control since its affects on other objects happen only after one second this should allow @halt to be type before getting blown away by scrolling text</p>
<p >the point-&gt;waittime test would be 0 except the command is being put in the low priority queue to be done in one second anyway</p>
<p >Do the wait queue</p>
<p >Check the semaphore queue for expired timed-waits</p>
<p >&lt; Skip if not timed-wait</p>

</div>
</div>
<a id="abb4ac332d759e27de939b63e504e3d7b" name="abb4ac332d759e27de939b63e504e3d7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb4ac332d759e27de939b63e504e3d7b">&#9670;&#160;</a></span>do_top()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_top </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ncmds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute the command at the top of the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ncmds</td><td>Number of commands to execute </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<p >Load scratch args</p>
<p >&lt; gotta check this, as the value's * changed</p>

</div>
</div>
<a id="a944af311f78f00e7823f95e00d000734" name="a944af311f78f00e7823f95e00d000734"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a944af311f78f00e7823f95e00d000734">&#9670;&#160;</a></span>do_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_wait </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cargs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ncargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Command interface to wait_que. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">event</td><td>Event </td></tr>
    <tr><td class="paramname">cmd</td><td>Command </td></tr>
    <tr><td class="paramname">cargs</td><td>Command arguments </td></tr>
    <tr><td class="paramname">ncargs</td><td>Number of commands </td></tr>
  </table>
  </dd>
</dl>
<p >If arg1 is all numeric, do simple (non-sem) timed wait.</p>
<p >Semaphore wait with optional timeout</p>
<p >Get timeout, default 0</p>
<p >thing over-notified, run the command immediately</p>

</div>
</div>
<a id="af1e6682421cadeafa52cad77f2115d1e" name="af1e6682421cadeafa52cad77f2115d1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1e6682421cadeafa52cad77f2115d1e">&#9670;&#160;</a></span>do_wait_pid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_wait_pid </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pidstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>timestr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the wait time on an existing entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">pidstr</td><td>PID of the entry </td></tr>
    <tr><td class="paramname">timestr</td><td>Wait time </td></tr>
  </table>
  </dd>
</dl>
<p >The semaphore queue is unsorted, but the main wait queue is sorted. So we may have to go rethread.</p>

</div>
</div>
<a id="ad42b5a68e8ff34ceedca52df77b818d5" name="ad42b5a68e8ff34ceedca52df77b818d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad42b5a68e8ff34ceedca52df77b818d5">&#9670;&#160;</a></span>give_que()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void give_que </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *&#160;</td>
          <td class="paramname"><em>tmp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Thread a queue block onto the high or low priority queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmp</td><td>Queue Entry </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a21182c864f8b56abdb1670ee36388af4" name="a21182c864f8b56abdb1670ee36388af4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21182c864f8b56abdb1670ee36388af4">&#9670;&#160;</a></span>halt_que()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halt_que </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>object</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove all queued commands from a certain player. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">object</td><td>DBref of object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<p >Player queue</p>
<p >Object queue</p>
<p >Wait queue</p>
<p >Semaphore queue</p>

</div>
</div>
<a id="a7ada5a41834d1fa6fda6f7270976b84b" name="a7ada5a41834d1fa6fda6f7270976b84b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ada5a41834d1fa6fda6f7270976b84b">&#9670;&#160;</a></span>nfy_que()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nfy_que </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>sem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify commands from the queue and perform or discard them. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">sem</td><td>DBref of sem </td></tr>
    <tr><td class="paramname">attr</td><td>Attributes </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">count</td><td>Counter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<p >Either run or discard the command</p>
<p >If we've notified enough, exit</p>
<p >Update the sem waiters count</p>

</div>
</div>
<a id="a1122a873593fa4e2597807cb59064f4d" name="a1122a873593fa4e2597807cb59064f4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1122a873593fa4e2597807cb59064f4d">&#9670;&#160;</a></span>qpid_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int qpid_next </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next available queue PID. </p>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

</div>
</div>
<a id="a7b181f9619cd91f255893143c1180d19" name="a7b181f9619cd91f255893143c1180d19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b181f9619cd91f255893143c1180d19">&#9670;&#160;</a></span>que_next()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int que_next </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the time in seconds until the next command should be run from the queue. </p>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>
<p >If there are commands in the player queue, we want to run them immediately.</p>
<p >If there are commands in the object queue, we want to run them after a one-second pause.</p>
<p >&lt; Skip if no timeout</p>

</div>
</div>
<a id="a241087fa0d439b2aa4a06372f759535b" name="a241087fa0d439b2aa4a06372f759535b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a241087fa0d439b2aa4a06372f759535b">&#9670;&#160;</a></span>que_want()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool que_want </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>ptarg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>otarg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Do we want this queue entry? </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry</td><td>Queue Entry </td></tr>
    <tr><td class="paramname">ptarg</td><td>Player target </td></tr>
    <tr><td class="paramname">otarg</td><td>Object target </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

</div>
</div>
<a id="ac9c417fbe72f221f0d5273cf5c4cdabd" name="ac9c417fbe72f221f0d5273cf5c4cdabd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9c417fbe72f221f0d5273cf5c4cdabd">&#9670;&#160;</a></span>remove_waitq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void remove_waitq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *&#160;</td>
          <td class="paramname"><em>qptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove an entry from the wait queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">qptr</td><td>Queue Entry </td></tr>
  </table>
  </dd>
</dl>
<p >Head of the queue. Just remove it and relink.</p>
<p >Go find it somewhere in the queue and take it out.</p>

</div>
</div>
<a id="ad7c07cededc233d80e7d0f47f01a8589" name="ad7c07cededc233d80e7d0f47f01a8589"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7c07cededc233d80e7d0f47f01a8589">&#9670;&#160;</a></span>setup_que()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> * setup_que </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>args</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nargs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structglobal__register__data.html">GDATA</a> *&#160;</td>
          <td class="paramname"><em>gargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set up a queue entry. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">command</td><td>Command </td></tr>
    <tr><td class="paramname">args</td><td>Arguments </td></tr>
    <tr><td class="paramname">nargs</td><td>Number of arguments </td></tr>
    <tr><td class="paramname">gargs</td><td>Global registers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>BQUE* </dd></dl>
<p >Can we run commands at all?</p>
<p >make sure player can afford to do it</p>
<p >Wizards and their objs may queue up to db_top+1 cmds. Players are limited to QUEUE_QUOTA. -mnp</p>
<p >halt also means no command execution allowed</p>
<p >Generate a PID</p>
<p >We passed all the tests, calculate the length of the save string.</p>
<p >Create the queue entry and load the save string</p>
<p >Set up registers and whatnot</p>
<p >Load the rest of the queue block</p>

</div>
</div>
<a id="ae1fc4d917206108ebc53d0291e268aa1" name="ae1fc4d917206108ebc53d0291e268aa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1fc4d917206108ebc53d0291e268aa1">&#9670;&#160;</a></span>show_que()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void show_que </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="typedefs_8h.html#aee5aada2e75abf9cfff8d45524dec45c">BQUE</a> *&#160;</td>
          <td class="paramname"><em>queue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>qtot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>qent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>qdel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player_targ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>obj_targ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>tell player what commands they have pending in the queue </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">queue</td><td>Queue Entry </td></tr>
    <tr><td class="paramname">qtot</td><td>Queue Total </td></tr>
    <tr><td class="paramname">qent</td><td>Queue Entries </td></tr>
    <tr><td class="paramname">qdel</td><td>Queue Deleted </td></tr>
    <tr><td class="paramname">player_targ</td><td>DBref of player target </td></tr>
    <tr><td class="paramname">obj_targ</td><td>DBref of object target </td></tr>
    <tr><td class="paramname">header</td><td>Header </td></tr>
  </table>
  </dd>
</dl>
<p >A minor shortcut. We can never timeout-wait on a non-Semaphore attribute.</p>

</div>
</div>
<a id="ade685b238a4a9145c479e5f8b6c5af5c" name="ade685b238a4a9145c479e5f8b6c5af5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade685b238a4a9145c479e5f8b6c5af5c">&#9670;&#160;</a></span>wait_que()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wait_que </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>wait</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>sem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>args</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nargs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structglobal__register__data.html">GDATA</a> *&#160;</td>
          <td class="paramname"><em>gargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add commands to the wait or semaphore queues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">wait</td><td>Delay </td></tr>
    <tr><td class="paramname">sem</td><td>Semaphores </td></tr>
    <tr><td class="paramname">attr</td><td>Attributes </td></tr>
    <tr><td class="paramname">command</td><td>Command </td></tr>
    <tr><td class="paramname">args</td><td>Arguments </td></tr>
    <tr><td class="paramname">nargs</td><td>Number of arguments </td></tr>
    <tr><td class="paramname">gargs</td><td>Global registers </td></tr>
  </table>
  </dd>
</dl>
<p >Set wait time, and check for integer overflow</p>
<p >No semaphore, put on wait queue if wait value specified. Otherwise put on the normal queue.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
