<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TinyMUSH: TinyMUSH Commands and Registries Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TinyMUSH<span id="projectnumber">&#160;3.3</span>
   </div>
   <div id="projectbrief">TinyMUSH Server</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">TinyMUSH Commands and Registries Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md159"></a></p>
<p>This reference consolidates how TinyMUSH registers and resolves commands, functions, flags, powers, attributes, and related switch/config tables. It is intended for contributors navigating or extending the server.</p>
<h1><a class="anchor" id="autotoc_md160"></a>
At-a-Glance Index</h1>
<ul>
<li>Commands: builtin <code>command_table[]</code> and dynamic <code>@addcommand</code></li>
<li>Functions: builtin <code>FUN flist[]</code> and user-defined functions</li>
<li>Flags: <code>FLAGENT gen_flags[]</code></li>
<li>Powers: <code>POWERENT gen_powers[]</code></li>
<li>Attributes: builtin <code>ATTR attr[]</code></li>
<li>Switch Tables: many <code>NAMETAB</code> arrays used by individual commands</li>
<li>Config Keywords: <code>CONF conftable[]</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md161"></a>
Core Registries</h1>
<h2><a class="anchor" id="autotoc_md162"></a>
Commands</h2>
<ul>
<li>Table: <code>CMDENT command_table[]</code></li>
<li>Where: <a href="netmush/nametabs.c#L621">netmush/nametabs.c</a></li>
<li>Loader: <code><a class="el" href="command_8c.html#a69009db0d6b4333c7321278e9c168ea5" title="Initialize the command table.">init_cmdtab()</a></code> builds <code>mushstate.command_htab</code> and adds <code>__</code> aliases. See <a href="netmush/command.c#L48">netmush/command.c</a>.</li>
<li>Dynamic: <code>@addcommand</code> stores entries in linked lists (<code>ADDENT</code>) and attaches to <code>CMDENT.info.added</code>.</li>
</ul>
<p>CMD entries define name, switches, permissions (<code>CA_*</code>), extra data, call sequence (<code>CS_*</code>), optional hooks, and a handler pointer.</p>
<p>Example (excerpt):</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structcmdentry.html">CMDENT</a> <a class="code hl_variable" href="externs_8h.html#a3782006e6788cc7332f62bb190b69b25">command_table</a>[] = {</div>
<div class="line">    { (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;@@&quot;</span>, NULL, <a class="code hl_define" href="constants_8h.html#ac83d7116eca40585f086d0c0c5e02e0c">CA_PUBLIC</a>, 0, <a class="code hl_define" href="constants_8h.html#ad9f9f864d76a62b68d3fa073072bb11e">CS_NO_ARGS</a>, NULL, NULL, NULL, { do_comment } },</div>
<div class="line">    { (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;@eval&quot;</span>, NULL, <a class="code hl_define" href="constants_8h.html#a4db873a63995f0bd3f895b09cf80c7a6">CA_NO_SLAVE</a>, 0, <a class="code hl_define" href="constants_8h.html#a81307841e3d0d23b22b17ae3075dff39">CS_ONE_ARG</a> | <a class="code hl_define" href="constants_8h.html#a38d091069b6462c1257324c034771221">CS_INTERP</a>, NULL, NULL, NULL, { do_eval } },</div>
<div class="line">    { (<span class="keywordtype">char</span>*)<span class="stringliteral">&quot;look&quot;</span>, look_sw, <a class="code hl_define" href="constants_8h.html#a4865a7e9a5eaea541eeca0725d278ac9">CA_LOCATION</a>, <a class="code hl_define" href="constants_8h.html#ae8d1f8775acdf945fe9ccd82fcb921a7">LOOK_LOOK</a>, <a class="code hl_define" href="constants_8h.html#a81307841e3d0d23b22b17ae3075dff39">CS_ONE_ARG</a> | <a class="code hl_define" href="constants_8h.html#a38d091069b6462c1257324c034771221">CS_INTERP</a>, NULL, NULL, NULL, { do_look } },</div>
<div class="line">    <span class="comment">/* ... */</span></div>
<div class="line">};</div>
<div class="ttc" id="aconstants_8h_html_a38d091069b6462c1257324c034771221"><div class="ttname"><a href="constants_8h.html#a38d091069b6462c1257324c034771221">CS_INTERP</a></div><div class="ttdeci">#define CS_INTERP</div><div class="ttdef"><b>Definition</b> constants.h:360</div></div>
<div class="ttc" id="aconstants_8h_html_a4865a7e9a5eaea541eeca0725d278ac9"><div class="ttname"><a href="constants_8h.html#a4865a7e9a5eaea541eeca0725d278ac9">CA_LOCATION</a></div><div class="ttdeci">#define CA_LOCATION</div><div class="ttdef"><b>Definition</b> constants.h:418</div></div>
<div class="ttc" id="aconstants_8h_html_a4db873a63995f0bd3f895b09cf80c7a6"><div class="ttname"><a href="constants_8h.html#a4db873a63995f0bd3f895b09cf80c7a6">CA_NO_SLAVE</a></div><div class="ttdeci">#define CA_NO_SLAVE</div><div class="ttdef"><b>Definition</b> constants.h:393</div></div>
<div class="ttc" id="aconstants_8h_html_a81307841e3d0d23b22b17ae3075dff39"><div class="ttname"><a href="constants_8h.html#a81307841e3d0d23b22b17ae3075dff39">CS_ONE_ARG</a></div><div class="ttdeci">#define CS_ONE_ARG</div><div class="ttdef"><b>Definition</b> constants.h:356</div></div>
<div class="ttc" id="aconstants_8h_html_ac83d7116eca40585f086d0c0c5e02e0c"><div class="ttname"><a href="constants_8h.html#ac83d7116eca40585f086d0c0c5e02e0c">CA_PUBLIC</a></div><div class="ttdeci">#define CA_PUBLIC</div><div class="ttdoc">Command permission flags.</div><div class="ttdef"><b>Definition</b> constants.h:379</div></div>
<div class="ttc" id="aconstants_8h_html_ad9f9f864d76a62b68d3fa073072bb11e"><div class="ttname"><a href="constants_8h.html#ad9f9f864d76a62b68d3fa073072bb11e">CS_NO_ARGS</a></div><div class="ttdeci">#define CS_NO_ARGS</div><div class="ttdoc">Command handler call conventions.</div><div class="ttdef"><b>Definition</b> constants.h:355</div></div>
<div class="ttc" id="aconstants_8h_html_ae8d1f8775acdf945fe9ccd82fcb921a7"><div class="ttname"><a href="constants_8h.html#ae8d1f8775acdf945fe9ccd82fcb921a7">LOOK_LOOK</a></div><div class="ttdeci">#define LOOK_LOOK</div><div class="ttdef"><b>Definition</b> constants.h:631</div></div>
<div class="ttc" id="aexterns_8h_html_a3782006e6788cc7332f62bb190b69b25"><div class="ttname"><a href="externs_8h.html#a3782006e6788cc7332f62bb190b69b25">command_table</a></div><div class="ttdeci">CMDENT command_table[]</div><div class="ttdoc">Command table: Definitions for builtin commands, used to build the command hash table.</div><div class="ttdef"><b>Definition</b> nametabs.c:621</div></div>
<div class="ttc" id="astructcmdentry_html"><div class="ttname"><a href="structcmdentry.html">cmdentry</a></div><div class="ttdef"><b>Definition</b> typedefs.h:539</div></div>
</div><!-- fragment --><p>Call sequence flags (<code>CS_*</code>) determine the handler signature and pre/post processing (ARGV, INTERP, CMDARG, etc.). Permission bits (<code>CA_*</code>) gate access.</p>
<h2><a class="anchor" id="autotoc_md163"></a>
Functions</h2>
<ul>
<li>Table: <code>FUN flist[]</code></li>
<li>Where: <a href="netmush/functions.c#L497">netmush/functions.c</a></li>
<li>Loader: <code><a class="el" href="functions_8c.html#a6d959bcb9cc03839ddab4caee648ea55" title="Initialize the function hashtable.">init_functab()</a></code> inserts into <code>mushstate.func_htab</code>. See <a href="netmush/functions.c#L38">netmush/functions.c</a>.</li>
<li>User-defined: Managed via <code>@function</code> (<code>do_function</code>), tracked by <code>UFUN</code> list and <code>mushstate.ufunc_htab</code>.</li>
</ul>
<p>Example (excerpt):</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structfun.html">FUN</a> <a class="code hl_variable" href="externs_8h.html#a7d9279c29785755296a7b586c6b46ea4">flist</a>[] = {</div>
<div class="line">  { <span class="stringliteral">&quot;@@&quot;</span>, <a class="code hl_function" href="funstring_8c.html#ab5dfcbb140df57d36a92b28ec78e4692">fun_null</a>, 1, <a class="code hl_define" href="constants_8h.html#aaa08998f5d11d358612159fd982f2f04">FN_VARARGS</a> | <a class="code hl_define" href="constants_8h.html#a32c243cf0d57f3672015e59f9fc1353e">FN_NO_EVAL</a>, <a class="code hl_define" href="constants_8h.html#ac83d7116eca40585f086d0c0c5e02e0c">CA_PUBLIC</a>, NULL },</div>
<div class="line">  { <span class="stringliteral">&quot;ABS&quot;</span>, <a class="code hl_function" href="funmath_8c.html#ac62c4039b53ed4bb88655ebf7ecda878">fun_abs</a>, 1, 0, <a class="code hl_define" href="constants_8h.html#ac83d7116eca40585f086d0c0c5e02e0c">CA_PUBLIC</a>, NULL },</div>
<div class="line">  { <span class="stringliteral">&quot;HASPOWER&quot;</span>, <a class="code hl_function" href="funobj_8c.html#ac5cff0e903ca7e275d6593569341bbb4">fun_haspower</a>, 2, 0, <a class="code hl_define" href="constants_8h.html#ac83d7116eca40585f086d0c0c5e02e0c">CA_PUBLIC</a>, NULL },</div>
<div class="line">  <span class="comment">/* ... */</span></div>
<div class="line">};</div>
<div class="ttc" id="aconstants_8h_html_a32c243cf0d57f3672015e59f9fc1353e"><div class="ttname"><a href="constants_8h.html#a32c243cf0d57f3672015e59f9fc1353e">FN_NO_EVAL</a></div><div class="ttdeci">#define FN_NO_EVAL</div><div class="ttdef"><b>Definition</b> constants.h:772</div></div>
<div class="ttc" id="aconstants_8h_html_aaa08998f5d11d358612159fd982f2f04"><div class="ttname"><a href="constants_8h.html#aaa08998f5d11d358612159fd982f2f04">FN_VARARGS</a></div><div class="ttdeci">#define FN_VARARGS</div><div class="ttdef"><b>Definition</b> constants.h:771</div></div>
<div class="ttc" id="aexterns_8h_html_a7d9279c29785755296a7b586c6b46ea4"><div class="ttname"><a href="externs_8h.html#a7d9279c29785755296a7b586c6b46ea4">flist</a></div><div class="ttdeci">FUN flist[]</div><div class="ttdoc">List of existing MUSHCode functions in alphabetical order.</div><div class="ttdef"><b>Definition</b> functions.c:496</div></div>
<div class="ttc" id="afunmath_8c_html_ac62c4039b53ed4bb88655ebf7ecda878"><div class="ttname"><a href="funmath_8c.html#ac62c4039b53ed4bb88655ebf7ecda878">fun_abs</a></div><div class="ttdeci">void fun_abs(char *buff, char **bufc, dbref player __attribute__((unused)), dbref caller __attribute__((unused)), dbref cause __attribute__((unused)), char *fargs[], int nfargs __attribute__((unused)), char *cargs[] __attribute__((unused)), int ncargs __attribute__((unused)))</div><div class="ttdoc">Returns the absolute value of its argument.</div><div class="ttdef"><b>Definition</b> funmath.c:284</div></div>
<div class="ttc" id="afunobj_8c_html_ac5cff0e903ca7e275d6593569341bbb4"><div class="ttname"><a href="funobj_8c.html#ac5cff0e903ca7e275d6593569341bbb4">fun_haspower</a></div><div class="ttdeci">void fun_haspower(char *buff, char **bufc, dbref player, dbref caller __attribute__((unused)), dbref cause, char *fargs[], int nfargs __attribute__((unused)), char *cargs[] __attribute__((unused)), int ncargs __attribute__((unused)))</div><div class="ttdoc">Returns true if object &lt;object&gt; has the flag named &lt;flag&gt; set on it, or, if &lt;flag&gt; is PLAYER,...</div><div class="ttdef"><b>Definition</b> funobj.c:1684</div></div>
<div class="ttc" id="afunstring_8c_html_ab5dfcbb140df57d36a92b28ec78e4692"><div class="ttname"><a href="funstring_8c.html#ab5dfcbb140df57d36a92b28ec78e4692">fun_null</a></div><div class="ttdeci">void fun_null(char *buff, char **bufc, dbref player, dbref caller, dbref cause, char *fargs[], int nfargs, char *cargs[], int ncargs)</div><div class="ttdoc">Just eat the contents of the string. Handy for those times when you've output a bunch of junk in a fu...</div><div class="ttdef"><b>Definition</b> funstring.c:203</div></div>
<div class="ttc" id="astructfun_html"><div class="ttname"><a href="structfun.html">fun</a></div><div class="ttdoc">Functions related typedefs.</div><div class="ttdef"><b>Definition</b> typedefs.h:325</div></div>
</div><!-- fragment --><p>Function flags (e.g., <code>FN_VARARGS</code>, <code>FN_NO_EVAL</code>) and permission bits (<code>CA_*</code>) control evaluation and access.</p>
<h2><a class="anchor" id="autotoc_md164"></a>
Flags</h2>
<ul>
<li>Table: <code>FLAGENT gen_flags[]</code></li>
<li>Where: <a href="netmush/flags.c#L362">netmush/flags.c</a></li>
<li>Loader: <code><a class="el" href="flags_8c.html#a936ae65388329f8e02da55582d401447" title="Initialize flag hash tables.">init_flagtab()</a></code> → <code>mushstate.flags_htab</code>. See <a href="netmush/flags.c#L459">netmush/flags.c</a>.</li>
<li>Also see <code>OBJENT object_types[]</code> for type metadata in <a href="netmush/flags.c#L444">netmush/flags.c</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md165"></a>
Powers</h2>
<ul>
<li>Table: <code>POWERENT gen_powers[]</code></li>
<li>Where: <a href="netmush/powers.c#L171">netmush/powers.c</a></li>
<li>Loader: <code>init_powertab()</code> → <code>mushstate.powers_htab</code>. See <a href="netmush/powers.c#L219">netmush/powers.c</a>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md166"></a>
Attributes</h2>
<ul>
<li>Table: <code>ATTR attr[]</code></li>
<li>Where: <a href="netmush/nametabs.c#L1063">netmush/nametabs.c</a></li>
<li>Note: Attributes with <code>!(AF_NOCMD)</code> get auto-exposed as <code>@&lt;AttrName&gt;</code> commands inside <code><a class="el" href="command_8c.html#a69009db0d6b4333c7321278e9c168ea5" title="Initialize the command table.">init_cmdtab()</a></code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md167"></a>
Switch Tables (NAMETAB)</h1>
<p>Switch tables define per-command switches and decode into bitmasks or constants passed via <code>CMDENT.extra</code>. Common fields: name (lowercase), min abbrev length, permission, and value.</p>
<p>Representative tables (all in <a href="netmush/nametabs.c">netmush/nametabs.c</a>):</p><ul>
<li><code>addcmd_sw</code> [L27], <code>attrib_sw</code> [L31], <code>boot_sw</code> [L40], <code>clone_sw</code> [L50]</li>
<li><code>emit_sw</code> [L99], <code>end_sw</code> [L107], <code>examine_sw</code> [L121]</li>
<li><code>function_sw</code> [L163], <code>lock_sw</code> [L214], <code>switch_sw</code> [L548]</li>
<li>Global access names: <code>access_nametab[]</code> [L243]</li>
<li>Attribute access names: <code>attraccess_nametab[]</code> [L261], <code>indiv_attraccess_nametab[]</code> [L280]</li>
<li>List names for <code>@list</code>: <code>list_names[]</code> [L300]</li>
<li>Boolean names: <code>bool_names[]</code> [L332]</li>
<li>Help file keys: <code>list_files[]</code> [L348]</li>
<li>Logging: <code>logdata_nametab[]</code> [L371], <code>logoptions_nametab[]</code> [L381]</li>
<li>Feature toggles: <code>enable_names[]</code> [L402]</li>
<li>Signals: <code>sigactions_nametab[]</code> [L418]</li>
</ul>
<h1><a class="anchor" id="autotoc_md168"></a>
Config Keywords</h1>
<ul>
<li>Table: <code>CONF conftable[]</code></li>
<li>Where: <a href="netmush/nametabs.c#L765">netmush/nametabs.c</a></li>
<li>Purpose: Maps <code>mush.cnf</code> keys to handlers and backing fields. Many entries reference nametabs to parse bitmasks (e.g., <code>access_nametab</code>).</li>
</ul>
<h1><a class="anchor" id="autotoc_md169"></a>
Initialization Summary</h1>
<ul>
<li>Commands: <code><a class="el" href="command_8c.html#a69009db0d6b4333c7321278e9c168ea5" title="Initialize the command table.">init_cmdtab()</a></code> → <a href="netmush/command.c#L48">netmush/command.c</a></li>
<li>Functions: <code><a class="el" href="functions_8c.html#a6d959bcb9cc03839ddab4caee648ea55" title="Initialize the function hashtable.">init_functab()</a></code> → <a href="netmush/functions.c#L38">netmush/functions.c</a></li>
<li>Flags: <code><a class="el" href="flags_8c.html#a936ae65388329f8e02da55582d401447" title="Initialize flag hash tables.">init_flagtab()</a></code> → <a href="netmush/flags.c#L459">netmush/flags.c</a></li>
<li>Powers: <code>init_powertab()</code> → <a href="netmush/powers.c#L219">netmush/powers.c</a></li>
</ul>
<p>These populate the <code>mushstate</code> hash tables used at runtime.</p>
<h1><a class="anchor" id="autotoc_md170"></a>
Handler Signatures (by CS_* flags)</h1>
<p>Common patterns (see <code>CS_*</code> in <a href="netmush/constants.h">netmush/constants.h</a>):</p>
<ul>
<li><code>CS_NO_ARGS</code>: <code>void cmd(dbref player, dbref cause, int key)</code></li>
<li><code>CS_ONE_ARG</code>: <code>void cmd(dbref player, dbref cause, int key, char *arg1)</code></li>
<li><code>CS_TWO_ARG</code>: <code>void cmd(dbref player, dbref cause, int key, char *arg1, char *arg2)</code></li>
<li><code>... | CS_ARGV</code>: add <code>char *argv[], int argc</code></li>
<li><code>... | CS_CMDARG</code>: add <code>char *cargs[], int ncargs</code></li>
</ul>
<p><code>CS_INTERP</code> enables evaluation of arguments prior to dispatch; <code>CS_NOINTERP</code> disables it. <code>CS_STRIP_AROUND</code> controls brace stripping.</p>
<h1><a class="anchor" id="autotoc_md171"></a>
Execution Flow (Commands)</h1>
<ol type="1">
<li>Parse input → extract command token and args</li>
<li>Hash lookup (<code>mushstate.command_htab</code>) → resolve <code>CMDENT</code></li>
<li>Permission check (<code>CA_*</code>) and any user-defined permits</li>
<li>Pre-hook (if present)</li>
<li>Dispatch to handler per <code>CS_*</code> signature</li>
<li>Post-hook (if present)</li>
</ol>
<h1><a class="anchor" id="autotoc_md172"></a>
Interactions and Lookups</h1>
<ul>
<li>Builtin commands are in <code>command_table[]</code>.</li>
<li>Attribute commands (<code>@Attr</code>) are auto-created from <code>ATTR attr[]</code> in <code><a class="el" href="command_8c.html#a69009db0d6b4333c7321278e9c168ea5" title="Initialize the command table.">init_cmdtab()</a></code>.</li>
<li>Dynamic <code>@addcommand</code> entries chain to the base <code>CMDENT</code> for matching and dispatch.</li>
<li>Functions are looked up through <code>mushstate.func_htab</code> (builtin + user-defined via <code>@function</code>).</li>
<li>Flags and powers are found via <code>mushstate.flags_htab</code> and <code>mushstate.powers_htab</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md173"></a>
How to Extend</h1>
<h2><a class="anchor" id="autotoc_md174"></a>
Add a Builtin Command</h2>
<ol type="1">
<li>Implement handler (match signature to intended <code>CS_*</code>).</li>
<li>Add an entry to <code>command_table[]</code> in <a href="netmush/nametabs.c#L621">netmush/nametabs.c</a>: name (lowercase for words, special for lead-ins), switches (or <code>NULL</code>), <code>CA_*</code> perms, <code>extra</code>, <code>CS_*</code>, hooks (or <code>NULL</code>), handler in <code>info.handler</code>.</li>
<li>Optionally define a <code>NAMETAB</code> for switches in the same file and reference it from the command entry.</li>
<li>Build and verify the dispatcher resolves it (<code>@list commands</code> can help).</li>
</ol>
<h2><a class="anchor" id="autotoc_md175"></a>
Add a Dynamic Command (Game Content)</h2>
<p>Use <code>@addcommand</code> at runtime to create content-level commands attached to objects; these live under the <code>CMDENT.info.added</code> chain and follow the base handler’s mechanics with user permissions and hooks.</p>
<h2><a class="anchor" id="autotoc_md176"></a>
Add a Builtin Function</h2>
<ol type="1">
<li>Implement the function handler (<code>fun_*</code> prototype) respecting evaluation flags and varargs usage.</li>
<li>Add it to <code>FUN flist[]</code> in <a href="netmush/functions.c#L497">netmush/functions.c</a> with argument count, function flags (e.g., <code>FN_VARARGS</code>, <code>FN_NO_EVAL</code>), and <code>CA_*</code>.</li>
<li>If you need an extension-only permission, ensure appropriate <code>CA_*</code> exists and is surfaced in <code>access_nametab[]</code>.</li>
</ol>
<h2><a class="anchor" id="autotoc_md177"></a>
Add a Flag</h2>
<ol type="1">
<li>Add a constant in <code><a class="el" href="constants_8h.html" title="Global numeric and string constants for flags, limits, and parser tokens.">constants.h</a></code> and integrate with flag word (FLAG_WORD1/2/3).</li>
<li>Add an entry to <code>FLAGENT gen_flags[]</code> in <a href="netmush/flags.c#L362">netmush/flags.c</a> with a setter policy (e.g., <code>fh_wiz</code>, <code>fh_god</code>).</li>
<li>If needed, add aliases via the <code>flag_alias</code> config.</li>
</ol>
<h2><a class="anchor" id="autotoc_md178"></a>
Add a Power</h2>
<ol type="1">
<li>Add a constant in <code><a class="el" href="constants_8h.html" title="Global numeric and string constants for flags, limits, and parser tokens.">constants.h</a></code> and specify main vs extended word (<code>POWER_EXT</code>).</li>
<li>Add an entry to <code>POWERENT gen_powers[]</code> in <a href="netmush/powers.c#L171">netmush/powers.c</a> with a policy (<code>ph_wiz</code>, <code>ph_god</code>, etc.).</li>
<li>Use <code>power_alias</code> for aliases.</li>
</ol>
<h1><a class="anchor" id="autotoc_md179"></a>
Practical Checks</h1>
<ul>
<li>Find where a command is registered:</li>
</ul>
<div class="fragment"><div class="line">grep -n &#39;&quot;&lt;command&gt;&quot;&#39; netmush/nametabs.c</div>
</div><!-- fragment --><ul>
<li>Find a handler definition:</li>
</ul>
<div class="fragment"><div class="line">grep -n &quot;void do_&lt;name&gt;\s*\&zwj;(&quot; netmush/*.c</div>
</div><!-- fragment --><ul>
<li>Inspect function registry entry:</li>
</ul>
<div class="fragment"><div class="line">grep -n &#39;&quot;&lt;FUNCTIONNAME&gt;&quot;&#39; netmush/functions.c</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md180"></a>
Notes on Placeholders</h1>
<p>Handlers like <code>do_comment()</code> and <code>do_eval()</code> are intentionally minimal or no-op but are still valid command targets. If they appear in <code>command_table[]</code>, they are part of the user command surface and must not be removed without re-mapping or migration.</p>
<h1><a class="anchor" id="autotoc_md181"></a>
Related Source Pointers</h1>
<ul>
<li>Commands table and switches: <a href="netmush/nametabs.c">netmush/nametabs.c</a></li>
<li>Dispatcher and init: <a href="netmush/command.c">netmush/command.c</a></li>
<li>Functions registry: <a href="netmush/functions.c">netmush/functions.c</a></li>
<li>Flags: <a href="netmush/flags.c">netmush/flags.c</a></li>
<li>Powers: <a href="netmush/powers.c">netmush/powers.c</a></li>
<li>Attributes: <a href="netmush/nametabs.c#L1063">netmush/nametabs.c</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
