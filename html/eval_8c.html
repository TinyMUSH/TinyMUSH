<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TinyMUSH: src/netmush/eval.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TinyMUSH<span id="projectnumber">&#160;3.3</span>
   </div>
   <div id="projectbrief">TinyMUSH Server</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_d49c5bdcdc946239a893bf2d58085e26.html">netmush</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">eval.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Expression parsing, evaluation, and command/function argument processing.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="constants_8h_source.html">constants.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="typedefs_8h_source.html">typedefs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="externs_8h_source.html">externs.h</a>&quot;</code><br />
<code>#include &quot;prototypes.h&quot;</code><br />
<code>#include &quot;ansi.h&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for eval.c:</div>
<div class="dyncontent">
<div class="center"><img src="eval_8c__incl.png" border="0" usemap="#asrc_2netmush_2eval_8c" alt=""/></div>
<map name="asrc_2netmush_2eval_8c" id="asrc_2netmush_2eval_8c">
<area shape="rect" title="Expression parsing, evaluation, and command/function argument processing." alt="" coords="319,5,450,31"/>
<area shape="rect" title=" " alt="" coords="5,79,71,105"/>
<area shape="poly" title=" " alt="" coords="319,34,86,81,85,76,318,29"/>
<area shape="rect" href="constants_8h.html" title="Global numeric and string constants for flags, limits, and parser tokens." alt="" coords="95,79,184,105"/>
<area shape="poly" title=" " alt="" coords="344,34,196,77,195,72,342,29"/>
<area shape="rect" href="typedefs_8h.html" title="Core typedefs for dbrefs, flags, buffers, and engine data structures." alt="" coords="308,153,389,178"/>
<area shape="poly" title=" " alt="" coords="384,32,371,80,357,138,352,137,366,78,379,31"/>
<area shape="rect" title=" " alt="" coords="169,226,243,252"/>
<area shape="poly" title=" " alt="" coords="377,33,227,216,223,213,373,30"/>
<area shape="rect" href="macros_8h.html" title="Engine&#45;wide macros for memory tracking, flag checks, logging, and utilities." alt="" coords="496,79,570,105"/>
<area shape="poly" title=" " alt="" coords="411,29,495,69,492,74,409,34"/>
<area shape="rect" href="externs_8h.html" title="Shared extern declarations and globals used across the game engine." alt="" coords="593,79,667,105"/>
<area shape="poly" title=" " alt="" coords="427,29,579,73,578,78,426,34"/>
<area shape="rect" href="prototypes_8h_source.html" title=" " alt="" coords="380,79,472,105"/>
<area shape="poly" title=" " alt="" coords="394,30,414,64,409,67,389,33"/>
<area shape="rect" href="ansi_8h_source.html" title=" " alt="" coords="178,153,234,178"/>
<area shape="poly" title=" " alt="" coords="341,34,297,53,254,81,232,109,217,139,213,137,228,106,251,77,294,48,339,29"/>
<area shape="rect" title=" " alt="" coords="691,79,753,105"/>
<area shape="poly" title=" " alt="" coords="451,29,676,76,675,81,450,34"/>
<area shape="rect" title=" " alt="" coords="777,79,840,105"/>
<area shape="poly" title=" " alt="" coords="451,25,590,45,762,76,761,81,590,51,451,30"/>
<area shape="rect" title=" " alt="" coords="98,153,154,178"/>
<area shape="poly" title=" " alt="" coords="140,105,134,138,128,137,135,104"/>
<area shape="rect" title=" " alt="" coords="266,226,330,252"/>
<area shape="poly" title=" " alt="" coords="342,180,317,215,313,212,338,177"/>
<area shape="rect" title=" " alt="" coords="562,226,621,252"/>
<area shape="poly" title=" " alt="" coords="390,176,548,222,546,227,389,181"/>
<area shape="poly" title=" " alt="" coords="326,181,245,221,243,217,323,176"/>
<area shape="rect" title=" " alt="" coords="354,226,410,252"/>
<area shape="poly" title=" " alt="" coords="357,177,372,211,367,213,352,180"/>
<area shape="rect" title=" " alt="" coords="654,226,734,252"/>
<area shape="poly" title=" " alt="" coords="390,173,639,224,638,229,389,178"/>
<area shape="rect" title=" " alt="" coords="434,226,519,252"/>
<area shape="poly" title=" " alt="" coords="372,177,443,216,440,221,369,181"/>
<area shape="poly" title=" " alt="" coords="415,107,375,144,371,140,411,103"/>
<area shape="poly" title=" " alt="" coords="473,101,569,126,609,139,631,151,637,168,635,185,616,216,612,213,630,183,632,168,627,154,607,144,567,131,471,106"/>
<area shape="poly" title=" " alt="" coords="472,101,579,126,626,140,652,151,675,179,689,211,684,213,671,182,648,155,624,145,578,132,471,106"/>
<area shape="poly" title=" " alt="" coords="432,104,454,177,467,211,462,213,449,179,426,106"/>
<area shape="rect" title=" " alt="" coords="463,153,525,178"/>
<area shape="poly" title=" " alt="" coords="439,103,474,140,470,143,435,107"/>
<area shape="rect" title=" " alt="" coords="550,153,617,178"/>
<area shape="poly" title=" " alt="" coords="454,103,544,143,542,148,452,108"/>
<area shape="poly" title=" " alt="" coords="223,177,272,215,269,219,220,181"/>
<area shape="poly" title=" " alt="" coords="209,179,209,211,203,211,203,179"/>
<area shape="rect" title=" " alt="" coords="78,226,145,252"/>
<area shape="poly" title=" " alt="" coords="192,181,141,219,138,215,188,177"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtcache__ent.html">tcache_ent</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a2873367a1cbcd908ad371ee5659dfae0" id="r_a2873367a1cbcd908ad371ee5659dfae0"><td class="memItemLeft" align="right" valign="top"><a id="a2873367a1cbcd908ad371ee5659dfae0" name="a2873367a1cbcd908ad371ee5659dfae0"></a>
typedef struct <a class="el" href="structtcache__ent.html">tcache_ent</a>&#160;</td><td class="memItemRight" valign="bottom"><b>TCENT</b></td></tr>
<tr class="separator:a2873367a1cbcd908ad371ee5659dfae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a27a2e7614fa168f5ba831207292570ca" id="r_a27a2e7614fa168f5ba831207292570ca"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27a2e7614fa168f5ba831207292570ca">parse_to_cleanup</a> (int eval, bool first, char *cstr, char *rstr, char *zstr)</td></tr>
<tr class="memdesc:a27a2e7614fa168f5ba831207292570ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper for parse_to.  <br /></td></tr>
<tr class="separator:a27a2e7614fa168f5ba831207292570ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2b8a4a7343c4ae64073b5151605bddf" id="r_af2b8a4a7343c4ae64073b5151605bddf"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af2b8a4a7343c4ae64073b5151605bddf">parse_to</a> (char **dstr, char <a class="el" href="structdelim.html">delim</a>, int eval)</td></tr>
<tr class="memdesc:af2b8a4a7343c4ae64073b5151605bddf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split a line at a character, obeying nesting.  <br /></td></tr>
<tr class="separator:af2b8a4a7343c4ae64073b5151605bddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14e150c83d01030509f0f45e42b6bc0d" id="r_a14e150c83d01030509f0f45e42b6bc0d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a14e150c83d01030509f0f45e42b6bc0d">parse_arglist</a> (dbref player, dbref caller, dbref cause, char *dstr, char <a class="el" href="structdelim.html">delim</a>, dbref eval, char *fargs[], dbref nfargs, char *cargs[], dbref ncargs)</td></tr>
<tr class="memdesc:a14e150c83d01030509f0f45e42b6bc0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse a line into an argument list contained in lbufs.  <br /></td></tr>
<tr class="separator:a14e150c83d01030509f0f45e42b6bc0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8bfeaf169b11ac4c2000671efad295d" id="r_ab8bfeaf169b11ac4c2000671efad295d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab8bfeaf169b11ac4c2000671efad295d">get_gender</a> (dbref player)</td></tr>
<tr class="memdesc:ab8bfeaf169b11ac4c2000671efad295d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process a command line, evaluating function calls and %-substitutions.  <br /></td></tr>
<tr class="separator:ab8bfeaf169b11ac4c2000671efad295d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b18175ff6864ef4ebe687994ebe0740" id="r_a0b18175ff6864ef4ebe687994ebe0740"><td class="memItemLeft" align="right" valign="top"><a id="a0b18175ff6864ef4ebe687994ebe0740" name="a0b18175ff6864ef4ebe687994ebe0740"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>tcache_init</b> (void)</td></tr>
<tr class="memdesc:a0b18175ff6864ef4ebe687994ebe0740"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize trace cache. <br /></td></tr>
<tr class="separator:a0b18175ff6864ef4ebe687994ebe0740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa74a99c9484bdae3a0865dd149bae8b0" id="r_aa74a99c9484bdae3a0865dd149bae8b0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa74a99c9484bdae3a0865dd149bae8b0">tcache_empty</a> (void)</td></tr>
<tr class="memdesc:aa74a99c9484bdae3a0865dd149bae8b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Empty trace cache.  <br /></td></tr>
<tr class="separator:aa74a99c9484bdae3a0865dd149bae8b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5df671042db52223a24047dae59a9ba5" id="r_a5df671042db52223a24047dae59a9ba5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5df671042db52223a24047dae59a9ba5">tcache_add</a> (char *orig, char *result)</td></tr>
<tr class="memdesc:a5df671042db52223a24047dae59a9ba5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add to the trace cache.  <br /></td></tr>
<tr class="separator:a5df671042db52223a24047dae59a9ba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d58429dfccdc4c1c357e6f0ecfc7371" id="r_a4d58429dfccdc4c1c357e6f0ecfc7371"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4d58429dfccdc4c1c357e6f0ecfc7371">tcache_finish</a> (dbref player)</td></tr>
<tr class="memdesc:a4d58429dfccdc4c1c357e6f0ecfc7371"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminate trace cache.  <br /></td></tr>
<tr class="separator:a4d58429dfccdc4c1c357e6f0ecfc7371"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a387f7728c587b3851257e6fe7740b2b0" id="r_a387f7728c587b3851257e6fe7740b2b0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a387f7728c587b3851257e6fe7740b2b0">special_char</a> (unsigned char ch)</td></tr>
<tr class="memdesc:a387f7728c587b3851257e6fe7740b2b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if character is a special char.  <br /></td></tr>
<tr class="separator:a387f7728c587b3851257e6fe7740b2b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af91fbf8efad581eb78e23c3a11e6458a" id="r_af91fbf8efad581eb78e23c3a11e6458a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af91fbf8efad581eb78e23c3a11e6458a">token_char</a> (int ch)</td></tr>
<tr class="memdesc:af91fbf8efad581eb78e23c3a11e6458a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if a character is a token.  <br /></td></tr>
<tr class="separator:af91fbf8efad581eb78e23c3a11e6458a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a823fb6a3e1846d5bfbce36bcdc2c3d22" id="r_a823fb6a3e1846d5bfbce36bcdc2c3d22"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a823fb6a3e1846d5bfbce36bcdc2c3d22">get_subj</a> (int subj)</td></tr>
<tr class="memdesc:a823fb6a3e1846d5bfbce36bcdc2c3d22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get subject pronoun.  <br /></td></tr>
<tr class="separator:a823fb6a3e1846d5bfbce36bcdc2c3d22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82e6089bc0dc898bfbf5917d7fe6093b" id="r_a82e6089bc0dc898bfbf5917d7fe6093b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a82e6089bc0dc898bfbf5917d7fe6093b">get_poss</a> (int poss)</td></tr>
<tr class="memdesc:a82e6089bc0dc898bfbf5917d7fe6093b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Possessive Adjective pronoun.  <br /></td></tr>
<tr class="separator:a82e6089bc0dc898bfbf5917d7fe6093b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c0956f4504eab7514ae318ef62f0a18" id="r_a5c0956f4504eab7514ae318ef62f0a18"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5c0956f4504eab7514ae318ef62f0a18">get_obj</a> (int obj)</td></tr>
<tr class="memdesc:a5c0956f4504eab7514ae318ef62f0a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Object pronoun.  <br /></td></tr>
<tr class="separator:a5c0956f4504eab7514ae318ef62f0a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a735fd6a683566fad585fa3e3d90b7b" id="r_a2a735fd6a683566fad585fa3e3d90b7b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2a735fd6a683566fad585fa3e3d90b7b">get_absp</a> (int absp)</td></tr>
<tr class="memdesc:a2a735fd6a683566fad585fa3e3d90b7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Absolute Possessive pronoun.  <br /></td></tr>
<tr class="separator:a2a735fd6a683566fad585fa3e3d90b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8b1b12892bbf3fb39d1e11e646fdfb7" id="r_aa8b1b12892bbf3fb39d1e11e646fdfb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa8b1b12892bbf3fb39d1e11e646fdfb7">eval_expression_string</a> (char *buff, char **bufc, dbref player, dbref caller, dbref cause, int eval, char **dstr, char *cargs[], int ncargs)</td></tr>
<tr class="memdesc:aa8b1b12892bbf3fb39d1e11e646fdfb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute commands.  <br /></td></tr>
<tr class="separator:aa8b1b12892bbf3fb39d1e11e646fdfb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af51b3d614f7548722cc70d5aedc2d510" id="r_af51b3d614f7548722cc70d5aedc2d510"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structglobal__register__data.html">GDATA</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af51b3d614f7548722cc70d5aedc2d510">save_global_regs</a> (const char *funcname)</td></tr>
<tr class="memdesc:af51b3d614f7548722cc70d5aedc2d510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the global registers to protect them from various sorts of munging.  <br /></td></tr>
<tr class="separator:af51b3d614f7548722cc70d5aedc2d510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1ff6aaeba1bed1e8a4006ed25a16a38" id="r_ae1ff6aaeba1bed1e8a4006ed25a16a38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1ff6aaeba1bed1e8a4006ed25a16a38">restore_global_regs</a> (const char *funcname, <a class="el" href="structglobal__register__data.html">GDATA</a> *preserve)</td></tr>
<tr class="memdesc:ae1ff6aaeba1bed1e8a4006ed25a16a38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore the global registers to protect them from various sorts of munging.  <br /></td></tr>
<tr class="separator:ae1ff6aaeba1bed1e8a4006ed25a16a38"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:acd59334f82e7822833bba5c045016889" id="r_acd59334f82e7822833bba5c045016889"><td class="memItemLeft" align="right" valign="top"><a id="acd59334f82e7822833bba5c045016889" name="acd59334f82e7822833bba5c045016889"></a>
struct <a class="el" href="structtcache__ent.html">tcache_ent</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>tcache_head</b></td></tr>
<tr class="separator:acd59334f82e7822833bba5c045016889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac272e658fb5310a636c905b0dcceab3a" id="r_ac272e658fb5310a636c905b0dcceab3a"><td class="memItemLeft" align="right" valign="top"><a id="ac272e658fb5310a636c905b0dcceab3a" name="ac272e658fb5310a636c905b0dcceab3a"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tcache_top</b></td></tr>
<tr class="separator:ac272e658fb5310a636c905b0dcceab3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5bae2a2e50d69ac35f09dc33a553a8c" id="r_af5bae2a2e50d69ac35f09dc33a553a8c"><td class="memItemLeft" align="right" valign="top"><a id="af5bae2a2e50d69ac35f09dc33a553a8c" name="af5bae2a2e50d69ac35f09dc33a553a8c"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>tcache_count</b></td></tr>
<tr class="separator:af5bae2a2e50d69ac35f09dc33a553a8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Expression parsing, evaluation, and command/function argument processing. </p>
<dl class="section author"><dt>Author</dt><dd>TinyMUSH development team (<a href="https://github.com/TinyMUSH">https://github.com/TinyMUSH</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>4.0</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 1989-2025 TinyMUSH development team. You may distribute under the terms the Artistic License, as specified in the COPYING file. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa8b1b12892bbf3fb39d1e11e646fdfb7" name="aa8b1b12892bbf3fb39d1e11e646fdfb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8b1b12892bbf3fb39d1e11e646fdfb7">&#9670;&#160;</a></span>eval_expression_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eval_expression_string </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buff</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>bufc</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>player</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>caller</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>cause</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>eval</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>dstr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>cargs</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>ncargs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute commands. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buff</td><td>Output buffer </td></tr>
    <tr><td class="paramname">bufc</td><td>Output buffer tracker </td></tr>
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">caller</td><td>DBref of caller </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">eval</td><td>Evaluation flags </td></tr>
    <tr><td class="paramname">dstr</td><td>Destination Buffer </td></tr>
    <tr><td class="paramname">cargs</td><td>Command arguments </td></tr>
    <tr><td class="paramname">ncargs</td><td>Number of command arguments </td></tr>
  </table>
  </dd>
</dl>
<p>&lt; Track hilite/bright mode for color codes</p>
<p>Extend the buffer if we need to.</p>
<p>If we are tracing, save a copy of the starting buffer</p>
<p>Mundane characters are the most common. There are usually a bunch in a row. We should just copy them.</p>
<p>We must have a special character at this point.</p>
<p>A space. Add a space if not compressing or if previous char was not a space</p>
<p>General escape. Add the following char without special processing</p>
<p>Function start. Evaluate the contents of the square brackets as a function. If no closing bracket, insert the [ and continue.</p>
<p>Literal start. Insert everything up to the terminating } without parsing. If no closing brace, insert the { and continue.</p>
<p>Preserve leading spaces (Felan)</p>
<p>Percent-replace start. Evaluate the chars following and perform the appropriate substitution.</p>
<p>Null - all done</p>
<p>Command argument number N</p>
<p>Carriage return</p>
<p>Tab</p>
<p>Blank</p>
<p>c is last command executed</p>
<p>c is color</p>
<p>ANSI color - Use centralized parsing from <a class="el" href="ansi_8c.html" title="ANSI terminal control helpers and telnet negotiation support.">ansi.c</a></p>
<p>End of string after x - back up and break</p>
<p>ANSI colors disabled - skip the code</p>
<p>Parse the color code using <a class="el" href="ansi_8c.html#a10019119f7dc128e9848f4e04b6ce4f1" title="Parses a single x color code from the current position.">ansi_parse_single_x_code()</a> This handles all formats: &lt;color&gt;, &lt;fg/bg&gt;, +&lt;color&gt;, simple letters, etc.</p>
<p>Successfully parsed a color code - generate ANSI escape sequence Determine color type based on player capabilities</p>
<p>dstr has already been advanced by <a class="el" href="ansi_8c.html#a10019119f7dc128e9848f4e04b6ce4f1" title="Parses a single x color code from the current position.">ansi_parse_single_x_code()</a>, compensate for the (*dstr)++ that will happen at the end of the switch</p>
<p>Failed to parse - copy the character literally This maintains backward compatibility for invalid codes</p>
<p>Ran off the end. Back up.</p>
<p>x-variable</p>
<p>Check for _&lt;varname&gt;</p>
<p>Copy. No interpretation.</p>
<p>We ran off the end of the string without finding a termination condition. Go back.</p>
<p>Variable attribute</p>
<p>Local registers</p>
<p>We know there's no result, so we just advance past.</p>
<p>Whoops, no end. Go back.</p>
<p>Ran off the end. Back up.</p>
<p>Objective pronoun</p>
<p>Personal pronoun</p>
<p>Subjective pronoun</p>
<p>Absolute possessive - idea from Empedocles</p>
<p>Invoker DB number</p>
<p>Executor DB number</p>
<p>Invoker name</p>
<p>Invoker location db#</p>
<p>Caller dbref</p>
<p>Enactor's objID</p>
<p>itext() equivalent</p>
<p>itext2() equivalent</p>
<p>use absolute level number</p>
<p>use number as delta back from current</p>
<p>Arguments to function</p>
<p>Piped command output</p>
<p>Percent - a literal %</p>
<p>Just copy</p>
<p>Arglist start. See if what precedes is a function. If so, execute it if we should.</p>
<p>Load an sbuf with an uppercase version of the func name, and see if the func exists. Trim trailing spaces from the name if configured.</p>
<p>If not a builtin func, check for global func</p>
<p>Do the right thing if it doesn't exist</p>
<p>If no closing delim, just insert the '(' and continue normally</p>
<p>Count number of args returned</p>
<p>We've got function(args) now, so back up over function name in output buffer.</p>
<p>If it's a user-defined function, perform it now.</p>
<p>Return the space allocated for the args</p>
<p>If the number of args is right, perform the func. Otherwise return an error message. Note that parse_arglist returns zero args as one null arg, so we have to handle that case specially.</p>
<p>Check recursion limit</p>
<p>Deal with the peculiar case of the calling object being destroyed mid-function sequence, such as with a command()/@destroy combo...</p>
<p>Return the space allocated for the arguments</p>
<p>Nesting level of loop takes precedence over switch nesting level.</p>
<p>If we're eating spaces, and the last thing was a space, eat it up. Complicated by the fact that at_space is initially true. So check to see if we actually put something in the buffer, too.</p>
<p>The ansi() function knows how to take care of itself. However, if the player used a x sub in the string, and hasn't yet terminated the color with a xn yet, we'll have to do it for them.</p>
<p>Report trace information</p>

</div>
</div>
<a id="a2a735fd6a683566fad585fa3e3d90b7b" name="a2a735fd6a683566fad585fa3e3d90b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a735fd6a683566fad585fa3e3d90b7b">&#9670;&#160;</a></span>get_absp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * get_absp </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>absp</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Absolute Possessive pronoun. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subj</td><td>id of the pronoun </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* </dd></dl>

</div>
</div>
<a id="ab8bfeaf169b11ac4c2000671efad295d" name="ab8bfeaf169b11ac4c2000671efad295d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8bfeaf169b11ac4c2000671efad295d">&#9670;&#160;</a></span>get_gender()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_gender </td>
          <td>(</td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>player</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process a command line, evaluating function calls and %-substitutions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

</div>
</div>
<a id="a5c0956f4504eab7514ae318ef62f0a18" name="a5c0956f4504eab7514ae318ef62f0a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c0956f4504eab7514ae318ef62f0a18">&#9670;&#160;</a></span>get_obj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * get_obj </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>obj</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Object pronoun. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subj</td><td>id of the pronoun </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* </dd></dl>

</div>
</div>
<a id="a82e6089bc0dc898bfbf5917d7fe6093b" name="a82e6089bc0dc898bfbf5917d7fe6093b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82e6089bc0dc898bfbf5917d7fe6093b">&#9670;&#160;</a></span>get_poss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * get_poss </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>poss</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Possessive Adjective pronoun. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subj</td><td>id of the pronoun </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* </dd></dl>

</div>
</div>
<a id="a823fb6a3e1846d5bfbce36bcdc2c3d22" name="a823fb6a3e1846d5bfbce36bcdc2c3d22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a823fb6a3e1846d5bfbce36bcdc2c3d22">&#9670;&#160;</a></span>get_subj()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * get_subj </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>subj</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get subject pronoun. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subj</td><td>id of the pronoun </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* pronoun </dd></dl>

</div>
</div>
<a id="a14e150c83d01030509f0f45e42b6bc0d" name="a14e150c83d01030509f0f45e42b6bc0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14e150c83d01030509f0f45e42b6bc0d">&#9670;&#160;</a></span>parse_arglist()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * parse_arglist </td>
          <td>(</td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>player</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>caller</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>cause</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>dstr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>delim</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>eval</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>fargs</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>nfargs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>cargs</em></span>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>ncargs</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse a line into an argument list contained in lbufs. </p>
<p>A pointer is returned to whatever follows the final delimiter. If the arglist is unterminated, a NULL is returned. The original arglist is destructively modified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">caller</td><td>DBref of caller </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">dstr</td><td>Destination buffer </td></tr>
    <tr><td class="paramname">delim</td><td>Delimiter </td></tr>
    <tr><td class="paramname">eval</td><td>DBref of victim </td></tr>
    <tr><td class="paramname">fargs</td><td>Function arguments </td></tr>
    <tr><td class="paramname">nfargs</td><td>Number of function arguments </td></tr>
    <tr><td class="paramname">cargs</td><td>Command arguments </td></tr>
    <tr><td class="paramname">ncargs</td><td>Niimber of command arguments </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* </dd></dl>

</div>
</div>
<a id="af2b8a4a7343c4ae64073b5151605bddf" name="af2b8a4a7343c4ae64073b5151605bddf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2b8a4a7343c4ae64073b5151605bddf">&#9670;&#160;</a></span>parse_to()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * parse_to </td>
          <td>(</td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>dstr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char</td>          <td class="paramname"><span class="paramname"><em>delim</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>eval</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Split a line at a character, obeying nesting. </p>
<p>The line is destructively modified (a null is inserted where the delimiter was found) dstr is modified to point to the char after the delimiter, and the function return value points to the found string (space compressed if specified). If we ran off the end of the string without finding the delimiter, dstr is returned as NULL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dstr</td><td>String to parse </td></tr>
    <tr><td class="paramname">delim</td><td>Delimiter </td></tr>
    <tr><td class="paramname">eval</td><td>Evaluation flags </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* </dd></dl>
<p>general escape</p>
<p>also escapes chars</p>
<p>If we hit something on the stack, unwind to it Otherwise (it's not on stack), if it's our delim we are done, and we convert the delim to a null and return a ptr to the char after the null. If it's not our delimiter, skip over it normally</p>
<p>space</p>

</div>
</div>
<a id="a27a2e7614fa168f5ba831207292570ca" name="a27a2e7614fa168f5ba831207292570ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27a2e7614fa168f5ba831207292570ca">&#9670;&#160;</a></span>parse_to_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * parse_to_cleanup </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>eval</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>first</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>cstr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>rstr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>zstr</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper for parse_to. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eval</td><td>Evaluation flags </td></tr>
    <tr><td class="paramname">first</td><td>Is this the first pass? </td></tr>
    <tr><td class="paramname">cstr</td><td>String buffer </td></tr>
    <tr><td class="paramname">rstr</td><td>String buffer </td></tr>
    <tr><td class="paramname">zstr</td><td>String buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* </dd></dl>

</div>
</div>
<a id="ae1ff6aaeba1bed1e8a4006ed25a16a38" name="ae1ff6aaeba1bed1e8a4006ed25a16a38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1ff6aaeba1bed1e8a4006ed25a16a38">&#9670;&#160;</a></span>restore_global_regs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void restore_global_regs </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>funcname</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structglobal__register__data.html">GDATA</a> *</td>          <td class="paramname"><span class="paramname"><em>preserve</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore the global registers to protect them from various sorts of munging. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">funcname</td><td>Function name </td></tr>
    <tr><td class="paramname">preserve</td><td>Buffer where globals have been saved to. </td></tr>
  </table>
  </dd>
</dl>
<p>No change in the values. Move along.</p>
<p>Rather than doing a big free-and-copy thing, we could just handle changes in the data structure size. Place for future optimization.</p>
<p>skip overlong name to avoid overflow</p>

</div>
</div>
<a id="af51b3d614f7548722cc70d5aedc2d510" name="af51b3d614f7548722cc70d5aedc2d510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af51b3d614f7548722cc70d5aedc2d510">&#9670;&#160;</a></span>save_global_regs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structglobal__register__data.html">GDATA</a> * save_global_regs </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>funcname</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the global registers to protect them from various sorts of munging. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">funcname</td><td>Function name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>GDATA* </dd></dl>
<p>skip overlong name to avoid overflow</p>

</div>
</div>
<a id="a387f7728c587b3851257e6fe7740b2b0" name="a387f7728c587b3851257e6fe7740b2b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a387f7728c587b3851257e6fe7740b2b0">&#9670;&#160;</a></span>special_char()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool special_char </td>
          <td>(</td>
          <td class="paramtype">unsigned char</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if character is a special char. </p>
<p>ASCII table for reference </p><pre class="fragment">0   1   2   3   4   5   6   7   8   9   A   B   C   D   E   F
</pre><p> 0 NUL SOH STX ETX EOT ENQ ACK BEL BS TAB LF VT FF CR SO SI 1 DLE DC1 DC2 DC3 DC4 NAK SYN ETB CAN EM SUB ESC FS GS RS US 2 SPC ! " # $ % &amp; ' ( ) * + , - . / 3 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? 4 @ A B C D E F G H I J K L M N O 5 P Q R S T U V W X Y Z [ \ ] ^ _ 6 ` a b c d e f g h i j k l m n o 7 p q r s t u v w x y z { | } ~ DEL </p>
<p>We want '', ESC, ' ', '\', '[', '{', '(', '', and '#'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Character to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool True if special, false if not. </dd></dl>
<p>We adjust the return value in order to avoid always treating '#' like a special character, as it gets used a whole heck of a lot.</p>

</div>
</div>
<a id="a5df671042db52223a24047dae59a9ba5" name="a5df671042db52223a24047dae59a9ba5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5df671042db52223a24047dae59a9ba5">&#9670;&#160;</a></span>tcache_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcache_add </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>orig</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>result</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add to the trace cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">orig</td><td>Origin buffer </td></tr>
    <tr><td class="paramname">result</td><td>Result buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa74a99c9484bdae3a0865dd149bae8b0" name="aa74a99c9484bdae3a0865dd149bae8b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa74a99c9484bdae3a0865dd149bae8b0">&#9670;&#160;</a></span>tcache_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tcache_empty </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Empty trace cache. </p>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

</div>
</div>
<a id="a4d58429dfccdc4c1c357e6f0ecfc7371" name="a4d58429dfccdc4c1c357e6f0ecfc7371"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d58429dfccdc4c1c357e6f0ecfc7371">&#9670;&#160;</a></span>tcache_finish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tcache_finish </td>
          <td>(</td>
          <td class="paramtype">dbref</td>          <td class="paramname"><span class="paramname"><em>player</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminate trace cache. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
  </table>
  </dd>
</dl>
<p>Ick. If we have no pointer, we should have no flag.</p>

</div>
</div>
<a id="af91fbf8efad581eb78e23c3a11e6458a" name="af91fbf8efad581eb78e23c3a11e6458a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af91fbf8efad581eb78e23c3a11e6458a">&#9670;&#160;</a></span>token_char()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool token_char </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if a character is a token. </p>
<ul>
<li>We want '!', '#', '$', '+', 'A'.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Character to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char 1 if true, 0 if false </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
