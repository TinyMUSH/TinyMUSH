<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TinyMUSH: src/create.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TinyMUSH
   &#160;<span id="projectnumber">3.3</span>
   </div>
   <div id="projectbrief">TinyMUSH Server</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">create.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Commands that create new objects.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="system_8h_source.html">system.h</a>&quot;</code><br />
<code>#include &quot;defaults.h&quot;</code><br />
<code>#include &quot;<a class="el" href="constants_8h_source.html">constants.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="typedefs_8h_source.html">typedefs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="externs_8h_source.html">externs.h</a>&quot;</code><br />
<code>#include &quot;prototypes.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for create.c:</div>
<div class="dyncontent">
<div class="center"><img src="create_8c__incl.png" border="0" usemap="#asrc_2create_8c" alt=""/></div>
<map name="asrc_2create_8c" id="asrc_2create_8c">
<area shape="rect" title="Commands that create new objects." alt="" coords="1076,5,1167,32"/>
<area shape="rect" href="system_8h.html" title="Global headers and system compatibility." alt="" coords="765,80,840,107"/>
<area shape="rect" title=" " alt="" coords="865,80,943,107"/>
<area shape="rect" href="constants_8h.html" title="Constants used by the engine." alt="" coords="967,80,1057,107"/>
<area shape="rect" href="typedefs_8h.html" title="Type definitions for variables." alt="" coords="1081,80,1162,107"/>
<area shape="rect" href="macros_8h.html" title="Macro definitions." alt="" coords="1187,80,1261,107"/>
<area shape="rect" href="externs_8h.html" title="Prototypes for externs not defined elsewhere." alt="" coords="1285,80,1360,107"/>
<area shape="rect" title=" " alt="" coords="1385,80,1477,107"/>
<area shape="rect" title=" " alt="" coords="5,155,72,181"/>
<area shape="rect" title=" " alt="" coords="96,155,171,181"/>
<area shape="rect" title=" " alt="" coords="195,155,266,181"/>
<area shape="rect" title=" " alt="" coords="290,155,347,181"/>
<area shape="rect" title=" " alt="" coords="371,155,463,181"/>
<area shape="rect" title=" " alt="" coords="487,155,574,181"/>
<area shape="rect" title=" " alt="" coords="598,155,658,181"/>
<area shape="rect" title=" " alt="" coords="682,155,745,181"/>
<area shape="rect" title=" " alt="" coords="769,155,837,181"/>
<area shape="rect" title=" " alt="" coords="861,155,918,181"/>
<area shape="rect" title=" " alt="" coords="942,155,1037,181"/>
<area shape="rect" title=" " alt="" coords="1061,155,1110,181"/>
<area shape="rect" title=" " alt="" coords="1135,155,1201,181"/>
<area shape="rect" title=" " alt="" coords="1226,155,1294,181"/>
<area shape="rect" title=" " alt="" coords="1319,155,1396,181"/>
<area shape="rect" title=" " alt="" coords="1420,155,1503,181"/>
<area shape="rect" title=" " alt="" coords="1527,155,1591,181"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aeac0274f28a65bb5f1ff66ab0a1910f3"><td class="memItemLeft" align="right" valign="top">dbref&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#aeac0274f28a65bb5f1ff66ab0a1910f3">parse_linkable_room</a> (dbref player, char *room_name)</td></tr>
<tr class="memdesc:aeac0274f28a65bb5f1ff66ab0a1910f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a location to link to.  <a href="create_8c.html#aeac0274f28a65bb5f1ff66ab0a1910f3">More...</a><br /></td></tr>
<tr class="separator:aeac0274f28a65bb5f1ff66ab0a1910f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a133a525fe7fbe29f21b326ae2e60ccff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a133a525fe7fbe29f21b326ae2e60ccff">open_exit</a> (dbref player, dbref loc, char *direction, char *linkto)</td></tr>
<tr class="memdesc:a133a525fe7fbe29f21b326ae2e60ccff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a new exit and optionally link it somewhere.  <a href="create_8c.html#a133a525fe7fbe29f21b326ae2e60ccff">More...</a><br /></td></tr>
<tr class="separator:a133a525fe7fbe29f21b326ae2e60ccff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf7c7bd9db82f8c33479c4a7f04e4171"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#adf7c7bd9db82f8c33479c4a7f04e4171">do_open</a> (dbref player, dbref cause __attribute__((unused)), int key, char *direction, char *links[], int nlinks)</td></tr>
<tr class="memdesc:adf7c7bd9db82f8c33479c4a7f04e4171"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a new exit and optionally link it somewhere.  <a href="create_8c.html#adf7c7bd9db82f8c33479c4a7f04e4171">More...</a><br /></td></tr>
<tr class="separator:adf7c7bd9db82f8c33479c4a7f04e4171"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a43561f130b458f5d02253b123c320a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a9a43561f130b458f5d02253b123c320a">link_exit</a> (dbref player, dbref exit, dbref dest)</td></tr>
<tr class="memdesc:a9a43561f130b458f5d02253b123c320a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set destination(exits), dropto(rooms) or home(player,thing)  <a href="create_8c.html#a9a43561f130b458f5d02253b123c320a">More...</a><br /></td></tr>
<tr class="separator:a9a43561f130b458f5d02253b123c320a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad66b0c76ab14770c0a5e2805da6bc2a9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#ad66b0c76ab14770c0a5e2805da6bc2a9">do_link</a> (dbref player, dbref cause, int key, char *what, char *where)</td></tr>
<tr class="memdesc:ad66b0c76ab14770c0a5e2805da6bc2a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set destination(exits), dropto(rooms) or home(player,thing)  <a href="create_8c.html#ad66b0c76ab14770c0a5e2805da6bc2a9">More...</a><br /></td></tr>
<tr class="separator:ad66b0c76ab14770c0a5e2805da6bc2a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3366d40ca35756609330dd4507c528f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#ab3366d40ca35756609330dd4507c528f">do_parent</a> (dbref player, dbref cause __attribute__((unused)), int key __attribute__((unused)), char *tname, char *pname)</td></tr>
<tr class="memdesc:ab3366d40ca35756609330dd4507c528f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an object's parent field.  <a href="create_8c.html#ab3366d40ca35756609330dd4507c528f">More...</a><br /></td></tr>
<tr class="separator:ab3366d40ca35756609330dd4507c528f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a34ff2a9618b23223a20e2cf2c33e69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a8a34ff2a9618b23223a20e2cf2c33e69">do_dig</a> (dbref player, dbref cause, int key, char *name, char *args[], int nargs)</td></tr>
<tr class="memdesc:a8a34ff2a9618b23223a20e2cf2c33e69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new room.  <a href="create_8c.html#a8a34ff2a9618b23223a20e2cf2c33e69">More...</a><br /></td></tr>
<tr class="separator:a8a34ff2a9618b23223a20e2cf2c33e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a058eeac2dfa7d44ebb70c4cc0e545704"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a058eeac2dfa7d44ebb70c4cc0e545704">do_create</a> (dbref player, dbref cause __attribute__((unused)), int key __attribute__((unused)), char *name, char *coststr)</td></tr>
<tr class="memdesc:a058eeac2dfa7d44ebb70c4cc0e545704"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a new object.  <a href="create_8c.html#a058eeac2dfa7d44ebb70c4cc0e545704">More...</a><br /></td></tr>
<tr class="separator:a058eeac2dfa7d44ebb70c4cc0e545704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a787595ad4d25a20bbdd4c006c011ef20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a787595ad4d25a20bbdd4c006c011ef20">do_clone</a> (dbref player, dbref cause __attribute__((unused)), int key, char *name, char *arg2)</td></tr>
<tr class="memdesc:a787595ad4d25a20bbdd4c006c011ef20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a copy of an object.  <a href="create_8c.html#a787595ad4d25a20bbdd4c006c011ef20">More...</a><br /></td></tr>
<tr class="separator:a787595ad4d25a20bbdd4c006c011ef20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a258dcc17a703b592e163b81d48421cf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a258dcc17a703b592e163b81d48421cf5">do_pcreate</a> (dbref player, dbref cause __attribute__((unused)), int key, char *name, char *pass)</td></tr>
<tr class="memdesc:a258dcc17a703b592e163b81d48421cf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create new players and robots.  <a href="create_8c.html#a258dcc17a703b592e163b81d48421cf5">More...</a><br /></td></tr>
<tr class="separator:a258dcc17a703b592e163b81d48421cf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2fcfaf5de617dd3407049666a8dac01"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#ac2fcfaf5de617dd3407049666a8dac01">can_destroy_exit</a> (dbref player, dbref exit)</td></tr>
<tr class="memdesc:ac2fcfaf5de617dd3407049666a8dac01"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy exit things.  <a href="create_8c.html#ac2fcfaf5de617dd3407049666a8dac01">More...</a><br /></td></tr>
<tr class="separator:ac2fcfaf5de617dd3407049666a8dac01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08fbabba6961dd072ceea761865313cb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a08fbabba6961dd072ceea761865313cb">destroyable</a> (dbref victim)</td></tr>
<tr class="memdesc:a08fbabba6961dd072ceea761865313cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates if target of a @destroy is a 'special' object in the database.  <a href="create_8c.html#a08fbabba6961dd072ceea761865313cb">More...</a><br /></td></tr>
<tr class="separator:a08fbabba6961dd072ceea761865313cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f29f57da8f1acf322879942d86758cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a5f29f57da8f1acf322879942d86758cd">can_destroy_player</a> (dbref player, dbref victim)</td></tr>
<tr class="memdesc:a5f29f57da8f1acf322879942d86758cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the player can destroy a victim.  <a href="create_8c.html#a5f29f57da8f1acf322879942d86758cd">More...</a><br /></td></tr>
<tr class="separator:a5f29f57da8f1acf322879942d86758cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25cb6b004108f6b5ed9a59cf59d3891d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="create_8c.html#a25cb6b004108f6b5ed9a59cf59d3891d">do_destroy</a> (dbref player, dbref cause __attribute__((unused)), int key, char *what)</td></tr>
<tr class="memdesc:a25cb6b004108f6b5ed9a59cf59d3891d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy something.  <a href="create_8c.html#a25cb6b004108f6b5ed9a59cf59d3891d">More...</a><br /></td></tr>
<tr class="separator:a25cb6b004108f6b5ed9a59cf59d3891d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Commands that create new objects. </p>
<dl class="section author"><dt>Author</dt><dd>TinyMUSH development team (<a href="https://github.com/TinyMUSH">https://github.com/TinyMUSH</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>3.3 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2020-12-28</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 1989-2021 TinyMUSH development team. You may distribute under the terms the Artistic License, as specified in the COPYING file. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ac2fcfaf5de617dd3407049666a8dac01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2fcfaf5de617dd3407049666a8dac01">&#9670;&nbsp;</a></span>can_destroy_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool can_destroy_exit </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>exit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy exit things. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">exit</td><td>DBref of exit </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

</div>
</div>
<a id="a5f29f57da8f1acf322879942d86758cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f29f57da8f1acf322879942d86758cd">&#9670;&nbsp;</a></span>can_destroy_player()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool can_destroy_player </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>victim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the player can destroy a victim. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">victim</td><td>DBref of victim </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool </dd></dl>

</div>
</div>
<a id="a08fbabba6961dd072ceea761865313cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a08fbabba6961dd072ceea761865313cb">&#9670;&nbsp;</a></span>destroyable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool destroyable </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>victim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates if target of a @destroy is a 'special' object in the database. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">victim</td><td>DBref of the target </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int </dd></dl>

</div>
</div>
<a id="a787595ad4d25a20bbdd4c006c011ef20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a787595ad4d25a20bbdd4c006c011ef20">&#9670;&nbsp;</a></span>do_clone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_clone </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>arg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a copy of an object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">name</td><td>Name of the object </td></tr>
    <tr><td class="paramname">arg2</td><td>Arguments </td></tr>
  </table>
  </dd>
</dl>
<p>Let players clone things set VISUAL. It's easier than retyping in all that data</p>
<p>You can only make a parent link to what you control</p>
<p>You can only preserve the owner on the clone of an object owned by another player, if you control that player.</p>
<p>Determine the cost of cloning. We have to do limits enforcement here, because we're going to wipe out the attribute for money set by create_obj() and need to set this ourselves. Note that you can't change the cost of objects other than things.</p>
<p>Go make the clone object</p>
<p>Wipe out any old attributes and copy in the new data</p>
<p>Reset the name, since we cleared the attributes.</p>
<p>Reset the cost, since this also got wiped when we cleared attributes. Note that only things have a value, though you pay a cost for creating everything.</p>
<p>Clear out problem flags from the original. Don't strip the INHERIT bit if we got the Inherit switch. Don't strip other flags if we got the NoStrip switch EXCEPT for the Wizard flag, unless we're God. (Powers are not cloned, ever.)</p>
<p>Tell creator about it</p>
<p>Put the new thing in its new home. Break any dropto or link, then try to re-establish it.</p>
<p>If same owner run Aclone, else halt it. Also copy parent if we can</p>

</div>
</div>
<a id="a058eeac2dfa7d44ebb70c4cc0e545704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a058eeac2dfa7d44ebb70c4cc0e545704">&#9670;&nbsp;</a></span>do_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_create </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int key &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>coststr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a new object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">name</td><td>Name of object </td></tr>
    <tr><td class="paramname">coststr</td><td>Cost of object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a25cb6b004108f6b5ed9a59cf59d3891d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25cb6b004108f6b5ed9a59cf59d3891d">&#9670;&nbsp;</a></span>do_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_destroy </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>what</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy something. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">what</td><td>What to destroy </td></tr>
  </table>
  </dd>
</dl>
<p>You can destroy anything you control.</p>
<p>If you own a location, you can destroy its exits.</p>
<p>You can destroy DESTROY_OK things in your inventory.</p>
<p>Return an error if we didn't find anything to destroy.</p>
<p>Check SAFE and DESTROY_OK flags</p>
<p>Make sure we're not trying to destroy a special object</p>
<p>Make sure we can do it, on a type-specific basis</p>
<p>We can use @destroy/instant to immediately blow up an object that was already queued for destruction &ndash; that object is unmodified except for being Going.</p>
<p>If we specified the instant switch, or we're configured to immediately make Destroy_Ok things (or things owned by Destroy_Ok owners) go away, we do instant destruction.</p>
<p>Otherwise we queue things up for destruction.</p>

</div>
</div>
<a id="a8a34ff2a9618b23223a20e2cf2c33e69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a34ff2a9618b23223a20e2cf2c33e69">&#9670;&nbsp;</a></span>do_dig()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_dig </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>args</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nargs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new room. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">name</td><td>Name of the room </td></tr>
    <tr><td class="paramname">args</td><td>Arguments </td></tr>
    <tr><td class="paramname">nargs</td><td>Number of arguments </td></tr>
  </table>
  </dd>
</dl>
<p>we don't need to know player's location! hooray!</p>

</div>
</div>
<a id="ad66b0c76ab14770c0a5e2805da6bc2a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad66b0c76ab14770c0a5e2805da6bc2a9">&#9670;&nbsp;</a></span>do_link()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_link </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>cause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>what</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>where</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set destination(exits), dropto(rooms) or home(player,thing) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">what</td><td>What get an exit? </td></tr>
    <tr><td class="paramname">where</td><td>Where does it lead? </td></tr>
  </table>
  </dd>
</dl>
<p>Find the thing to link</p>
<p>Allow unlink if where is not specified</p>
<p>Set destination</p>
<p>Set home</p>
<p>Set dropto</p>

</div>
</div>
<a id="adf7c7bd9db82f8c33479c4a7f04e4171"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf7c7bd9db82f8c33479c4a7f04e4171">&#9670;&nbsp;</a></span>do_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_open </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>links</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nlinks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a new exit and optionally link it somewhere. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">direction</td><td>Direction </td></tr>
    <tr><td class="paramname">links</td><td>Links </td></tr>
    <tr><td class="paramname">nlinks</td><td>Number of links </td></tr>
  </table>
  </dd>
</dl>
<p>Create the exit and link to the destination, if there is one</p>
<p>Open the back link if we can</p>

</div>
</div>
<a id="ab3366d40ca35756609330dd4507c528f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3366d40ca35756609330dd4507c528f">&#9670;&nbsp;</a></span>do_parent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_parent </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int key &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set an object's parent field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">tname</td><td>Thing name </td></tr>
    <tr><td class="paramname">pname</td><td>Parent name </td></tr>
  </table>
  </dd>
</dl>
<p>get victim</p>
<p>Make sure we can do it</p>
<p>Find out what the new parent is</p>
<p>Make sure we have rights to set parent</p>
<p>Verify no recursive reference</p>

</div>
</div>
<a id="a258dcc17a703b592e163b81d48421cf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a258dcc17a703b592e163b81d48421cf5">&#9670;&nbsp;</a></span>do_pcreate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void do_pcreate </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref cause &#160;</td>
          <td class="paramname"><em>__attribute__</em>(unused), </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pass</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create new players and robots. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">cause</td><td>DBref of cause </td></tr>
    <tr><td class="paramname">key</td><td>Key </td></tr>
    <tr><td class="paramname">name</td><td>Name </td></tr>
    <tr><td class="paramname">pass</td><td>Password </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9a43561f130b458f5d02253b123c320a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a43561f130b458f5d02253b123c320a">&#9670;&nbsp;</a></span>link_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void link_exit </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>exit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set destination(exits), dropto(rooms) or home(player,thing) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of playyer </td></tr>
    <tr><td class="paramname">exit</td><td>DBref of exit </td></tr>
    <tr><td class="paramname">dest</td><td>DBref of destination </td></tr>
  </table>
  </dd>
</dl>
<p>Make sure we can link there: Our destination is HOME Our destination is AMBIGUOUS and we can link to variable exits Normal destination check: - We must control the destination or it must be LINK_OK or we must have LinkToAny and the destination's not God. - We must be able to pass the linklock, or we must be able to LinkToAny (power, or be a wizard) and be config'd so wizards ignore linklocks</p>
<p>Exit must be unlinked or controlled by you</p>
<p>handle costs</p>
<p>Pay the owner for his loss</p>
<p>link has been validated and paid for, do it and tell the player</p>

</div>
</div>
<a id="a133a525fe7fbe29f21b326ae2e60ccff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a133a525fe7fbe29f21b326ae2e60ccff">&#9670;&nbsp;</a></span>open_exit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void open_exit </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>loc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>linkto</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a new exit and optionally link it somewhere. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">loc</td><td>DBref of location </td></tr>
    <tr><td class="paramname">direction</td><td>Direction </td></tr>
    <tr><td class="paramname">linkto</td><td>Where to link to </td></tr>
  </table>
  </dd>
</dl>
<p>Initialize everything and link it in.</p>
<p>and we're done</p>
<p>See if we should do a link</p>
<p>Make sure the player passes the link lock</p>
<p>Link it if the player can pay for it</p>

</div>
</div>
<a id="aeac0274f28a65bb5f1ff66ab0a1910f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeac0274f28a65bb5f1ff66ab0a1910f3">&#9670;&nbsp;</a></span>parse_linkable_room()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">dbref parse_linkable_room </td>
          <td>(</td>
          <td class="paramtype">dbref&#160;</td>
          <td class="paramname"><em>player</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>room_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a location to link to. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">player</td><td>DBref of player </td></tr>
    <tr><td class="paramname">room_name</td><td>Room Name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>dbref </dd></dl>
<p>HOME is always linkable</p>
<p>Make sure we can link to it</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
