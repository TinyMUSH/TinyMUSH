<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TinyMUSH: src/netmush/ansi.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TinyMUSH<span id="projectnumber">&#160;3.3</span>
   </div>
   <div id="projectbrief">TinyMUSH Server</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_d49c5bdcdc946239a893bf2d58085e26.html">netmush</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">ansi.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>ANSI terminal control helpers and telnet negotiation support.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="constants_8h_source.html">constants.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="typedefs_8h_source.html">typedefs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="macros_8h_source.html">macros.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="externs_8h_source.html">externs.h</a>&quot;</code><br />
<code>#include &quot;prototypes.h&quot;</code><br />
<code>#include &quot;ansi.h&quot;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;strings.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ansi.c:</div>
<div class="dyncontent">
<div class="center"><img src="ansi_8c__incl.png" border="0" usemap="#asrc_2netmush_2ansi_8c" alt=""/></div>
<map name="asrc_2netmush_2ansi_8c" id="asrc_2netmush_2ansi_8c">
<area shape="rect" title="ANSI terminal control helpers and telnet negotiation support." alt="" coords="554,5,685,31"/>
<area shape="rect" title=" " alt="" coords="5,79,71,105"/>
<area shape="poly" title=" " alt="" coords="554,27,349,45,220,61,86,82,85,76,219,55,348,40,553,21"/>
<area shape="rect" href="constants_8h.html" title="Global numeric and string constants for flags, limits, and parser tokens." alt="" coords="95,79,184,105"/>
<area shape="poly" title=" " alt="" coords="553,31,202,82,200,82,199,77,202,76,553,25"/>
<area shape="rect" href="typedefs_8h.html" title="Core typedefs for dbrefs, flags, buffers, and engine data structures." alt="" coords="450,153,530,178"/>
<area shape="poly" title=" " alt="" coords="581,34,543,52,525,65,511,81,498,108,493,138,488,137,493,107,506,77,522,61,540,48,578,29"/>
<area shape="rect" title=" " alt="" coords="235,226,308,252"/>
<area shape="poly" title=" " alt="" coords="553,25,481,31,402,41,334,58,308,68,291,81,273,111,265,145,265,180,268,211,263,211,259,181,260,145,268,109,287,77,305,64,332,52,401,36,480,25,553,20"/>
<area shape="rect" href="macros_8h.html" title="Engine&#45;wide macros for memory tracking, flag checks, logging, and utilities." alt="" coords="636,79,710,105"/>
<area shape="poly" title=" " alt="" coords="630,30,657,65,652,68,626,33"/>
<area shape="rect" href="externs_8h.html" title="Shared extern declarations and globals used across the game engine." alt="" coords="733,79,807,105"/>
<area shape="poly" title=" " alt="" coords="646,29,732,70,729,74,644,34"/>
<area shape="rect" href="prototypes_8h_source.html" title=" " alt="" coords="520,79,612,105"/>
<area shape="poly" title=" " alt="" coords="613,33,586,68,582,65,608,30"/>
<area shape="rect" href="ansi_8h_source.html" title=" " alt="" coords="301,79,356,105"/>
<area shape="poly" title=" " alt="" coords="571,34,372,83,371,77,569,29"/>
<area shape="rect" title=" " alt="" coords="359,153,426,178"/>
<area shape="poly" title=" " alt="" coords="588,34,542,54,493,81,451,113,416,144,413,140,448,109,490,77,539,49,586,29"/>
<area shape="rect" title=" " alt="" coords="831,79,893,105"/>
<area shape="poly" title=" " alt="" coords="661,29,817,74,815,80,660,34"/>
<area shape="rect" title=" " alt="" coords="917,79,978,105"/>
<area shape="poly" title=" " alt="" coords="683,29,903,76,902,81,682,34"/>
<area shape="rect" title=" " alt="" coords="1001,79,1064,105"/>
<area shape="poly" title=" " alt="" coords="686,25,821,45,986,76,985,81,820,51,685,31"/>
<area shape="rect" title=" " alt="" coords="1088,79,1158,105"/>
<area shape="poly" title=" " alt="" coords="686,23,858,43,1073,76,1072,81,857,48,685,28"/>
<area shape="rect" title=" " alt="" coords="1182,79,1243,105"/>
<area shape="poly" title=" " alt="" coords="686,21,897,38,1030,54,1168,76,1167,82,1029,60,896,44,685,26"/>
<area shape="rect" title=" " alt="" coords="112,153,167,178"/>
<area shape="poly" title=" " alt="" coords="142,105,142,137,137,137,137,105"/>
<area shape="rect" title=" " alt="" coords="353,226,416,252"/>
<area shape="poly" title=" " alt="" coords="474,181,417,220,414,215,471,177"/>
<area shape="rect" title=" " alt="" coords="579,226,638,252"/>
<area shape="poly" title=" " alt="" coords="511,177,577,216,574,220,509,181"/>
<area shape="poly" title=" " alt="" coords="454,181,324,224,322,218,452,176"/>
<area shape="rect" title=" " alt="" coords="462,226,518,252"/>
<area shape="poly" title=" " alt="" coords="493,179,493,211,487,211,487,179"/>
<area shape="rect" title=" " alt="" coords="680,226,761,252"/>
<area shape="poly" title=" " alt="" coords="530,176,668,219,666,224,528,181"/>
<area shape="rect" title=" " alt="" coords="794,226,879,252"/>
<area shape="poly" title=" " alt="" coords="531,173,544,176,779,224,778,229,543,181,530,178"/>
<area shape="poly" title=" " alt="" coords="555,107,516,144,512,140,551,103"/>
<area shape="poly" title=" " alt="" coords="613,102,678,123,706,137,723,151,728,164,728,176,712,197,685,214,654,227,652,222,682,210,708,193,723,175,723,165,719,154,703,141,676,128,611,107"/>
<area shape="poly" title=" " alt="" coords="613,100,690,121,723,135,744,151,751,167,750,183,739,214,734,212,745,182,745,168,740,154,720,140,688,126,612,105"/>
<area shape="poly" title=" " alt="" coords="613,101,698,124,737,137,765,150,798,180,824,212,819,215,795,184,762,155,735,142,696,129,611,106"/>
<area shape="rect" title=" " alt="" coords="555,153,617,178"/>
<area shape="poly" title=" " alt="" coords="572,104,581,137,576,138,567,106"/>
<area shape="rect" title=" " alt="" coords="642,153,709,178"/>
<area shape="poly" title=" " alt="" coords="586,103,646,142,643,146,583,107"/>
<area shape="poly" title=" " alt="" coords="333,105,338,138,350,177,369,212,364,215,345,179,333,139,327,106"/>
<area shape="poly" title=" " alt="" coords="326,106,284,213,279,211,321,104"/>
<area shape="poly" title=" " alt="" coords="341,103,374,139,370,143,337,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aedbc240c83b027a81456f399edee9606" id="r_aedbc240c83b027a81456f399edee9606"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structColorCIELab.html">ColorCIELab</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aedbc240c83b027a81456f399edee9606">ansi_rgb_to_cielab</a> (<a class="el" href="structColorRGB.html">ColorRGB</a> color)</td></tr>
<tr class="memdesc:aedbc240c83b027a81456f399edee9606"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts an RGB color to CIELAB color space.  <br /></td></tr>
<tr class="separator:aedbc240c83b027a81456f399edee9606"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18b1d3b66e84fb99814b4bf240f7ba42" id="r_a18b1d3b66e84fb99814b4bf240f7ba42"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a18b1d3b66e84fb99814b4bf240f7ba42">ansi_ciede2000</a> (<a class="el" href="structColorCIELab.html">ColorCIELab</a> lab1, <a class="el" href="structColorCIELab.html">ColorCIELab</a> lab2)</td></tr>
<tr class="memdesc:a18b1d3b66e84fb99814b4bf240f7ba42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the CIEDE2000 distance between two CIELAB colors.  <br /></td></tr>
<tr class="separator:a18b1d3b66e84fb99814b4bf240f7ba42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a925d6c1ab43d953c312a7203a9658cef" id="r_a925d6c1ab43d953c312a7203a9658cef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structColorEntry.html">ColorEntry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a925d6c1ab43d953c312a7203a9658cef">ansi_find_closest_color_with_lab</a> (<a class="el" href="structColorCIELab.html">ColorCIELab</a> lab, ColorType type)</td></tr>
<tr class="memdesc:a925d6c1ab43d953c312a7203a9658cef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the closest ANSI or XTerm color to a given CIELAB color.  <br /></td></tr>
<tr class="separator:a925d6c1ab43d953c312a7203a9658cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72b1530ed14defc2cef739cfddecf5d4" id="r_a72b1530ed14defc2cef739cfddecf5d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a72b1530ed14defc2cef739cfddecf5d4">ansi_get_color_from_rgb</a> (<a class="el" href="structColorState.html">ColorState</a> *color, <a class="el" href="structColorRGB.html">ColorRGB</a> rgb, bool is_background)</td></tr>
<tr class="memdesc:a72b1530ed14defc2cef739cfddecf5d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the foreground or background color from an RGB color.  <br /></td></tr>
<tr class="separator:a72b1530ed14defc2cef739cfddecf5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e70a884881eb06af93d5ba2a0418c78" id="r_a0e70a884881eb06af93d5ba2a0418c78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0e70a884881eb06af93d5ba2a0418c78">ansi_get_color_from_index</a> (<a class="el" href="structColorState.html">ColorState</a> *color, int index, bool is_background)</td></tr>
<tr class="memdesc:a0e70a884881eb06af93d5ba2a0418c78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the foreground or background color from an XTerm index.  <br /></td></tr>
<tr class="separator:a0e70a884881eb06af93d5ba2a0418c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bdc82d815125f5a5a354bee287ddd65" id="r_a3bdc82d815125f5a5a354bee287ddd65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3bdc82d815125f5a5a354bee287ddd65">ansi_get_color_from_name</a> (<a class="el" href="structColorState.html">ColorState</a> *color, const char *name, bool is_background)</td></tr>
<tr class="memdesc:a3bdc82d815125f5a5a354bee287ddd65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the foreground or background color from a color name.  <br /></td></tr>
<tr class="separator:a3bdc82d815125f5a5a354bee287ddd65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d5c4c199abf39e759cbf884c7980e2b" id="r_a6d5c4c199abf39e759cbf884c7980e2b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6d5c4c199abf39e759cbf884c7980e2b">ansi_get_color_from_text</a> (<a class="el" href="structColorState.html">ColorState</a> *color, char *text, bool is_background)</td></tr>
<tr class="memdesc:a6d5c4c199abf39e759cbf884c7980e2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a hexadecimal or decimal string to set an RGB color.  <br /></td></tr>
<tr class="separator:a6d5c4c199abf39e759cbf884c7980e2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a577ecea9667560f8636243f0521fbc70" id="r_a577ecea9667560f8636243f0521fbc70"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a577ecea9667560f8636243f0521fbc70">ansi_parse_color_from_string</a> (<a class="el" href="structColorState.html">ColorState</a> *color, const char *color_str, bool is_background)</td></tr>
<tr class="memdesc:a577ecea9667560f8636243f0521fbc70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a complex color string and sets the corresponding color.  <br /></td></tr>
<tr class="separator:a577ecea9667560f8636243f0521fbc70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43b21f23eddfbccf6797676310288e2c" id="r_a43b21f23eddfbccf6797676310288e2c"><td class="memItemLeft" align="right" valign="top">ColorStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a43b21f23eddfbccf6797676310288e2c">to_ansi_escape_sequence</a> (char *buffer, size_t buffer_size, size_t *offset, <a class="el" href="structColorState.html">ColorState</a> *to, ColorType type)</td></tr>
<tr class="memdesc:a43b21f23eddfbccf6797676310288e2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates an ANSI escape sequence from the color state.  <br /></td></tr>
<tr class="separator:a43b21f23eddfbccf6797676310288e2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad914d89313fd7b6468491ab89e57e0ee" id="r_ad914d89313fd7b6468491ab89e57e0ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad914d89313fd7b6468491ab89e57e0ee">ansi_parse_embedded_sequences</a> (const char *input, <a class="el" href="structColorSequence.html">ColorSequence</a> *sequences)</td></tr>
<tr class="memdesc:ad914d89313fd7b6468491ab89e57e0ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses embedded ANSI sequences in a string marked with 'x<code>'. </code> <br /></td></tr>
<tr class="separator:ad914d89313fd7b6468491ab89e57e0ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10019119f7dc128e9848f4e04b6ce4f1" id="r_a10019119f7dc128e9848f4e04b6ce4f1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10019119f7dc128e9848f4e04b6ce4f1">ansi_parse_single_x_code</a> (char **input_ptr, <a class="el" href="structColorState.html">ColorState</a> *color_out, bool *current_highlight)</td></tr>
<tr class="memdesc:a10019119f7dc128e9848f4e04b6ce4f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a single x color code from the current position.  <br /></td></tr>
<tr class="separator:a10019119f7dc128e9848f4e04b6ce4f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4447edd53423a6ecc0a63320eafd3279" id="r_a4447edd53423a6ecc0a63320eafd3279"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4447edd53423a6ecc0a63320eafd3279">ansi_parse_ansi_to_sequences</a> (const char *input, <a class="el" href="structColorSequence.html">ColorSequence</a> *sequences)</td></tr>
<tr class="memdesc:a4447edd53423a6ecc0a63320eafd3279"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a string with ANSI escape sequences and converts it to a <a class="el" href="structColorSequence.html" title="Parsed color sequence information.">ColorSequence</a>.  <br /></td></tr>
<tr class="separator:a4447edd53423a6ecc0a63320eafd3279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94d0aa911d32eef8396b50b0680588e8" id="r_a94d0aa911d32eef8396b50b0680588e8"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a94d0aa911d32eef8396b50b0680588e8">color_state_to_mush_code</a> (const <a class="el" href="structColorState.html">ColorState</a> *color)</td></tr>
<tr class="memdesc:a94d0aa911d32eef8396b50b0680588e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a mushcode string from a <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a>.  <br /></td></tr>
<tr class="separator:a94d0aa911d32eef8396b50b0680588e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1de5e3964b9254739c4d69c548ff327" id="r_af1de5e3964b9254739c4d69c548ff327"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af1de5e3964b9254739c4d69c548ff327">color_state_to_letters</a> (const <a class="el" href="structColorState.html">ColorState</a> *color)</td></tr>
<tr class="memdesc:af1de5e3964b9254739c4d69c548ff327"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates a letter code string from a <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a>.  <br /></td></tr>
<tr class="separator:af1de5e3964b9254739c4d69c548ff327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f2dfc1be1e8498eede545d0f5f3da3d" id="r_a6f2dfc1be1e8498eede545d0f5f3da3d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6f2dfc1be1e8498eede545d0f5f3da3d">color_state_to_escape</a> (const <a class="el" href="structColorState.html">ColorState</a> *color, ColorType type)</td></tr>
<tr class="memdesc:a6f2dfc1be1e8498eede545d0f5f3da3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> to an ANSI escape sequence string.  <br /></td></tr>
<tr class="separator:a6f2dfc1be1e8498eede545d0f5f3da3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a287dfc7f24bd306f6a627a9cec89d06e" id="r_a287dfc7f24bd306f6a627a9cec89d06e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a287dfc7f24bd306f6a627a9cec89d06e">ansi_parse_x_to_sequence</a> (char **ptr, ColorType type)</td></tr>
<tr class="memdesc:a287dfc7f24bd306f6a627a9cec89d06e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a x color code and generates the corresponding ANSI escape sequence.  <br /></td></tr>
<tr class="separator:a287dfc7f24bd306f6a627a9cec89d06e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10dfbb563532866525801626d470654a" id="r_a10dfbb563532866525801626d470654a"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a10dfbb563532866525801626d470654a">ansi_char_to_sequence</a> (int ch)</td></tr>
<tr class="memdesc:a10dfbb563532866525801626d470654a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert ansi character code (x?) to ansi sequence. Replacement for the ansiChar lookup table using colorDefinitions.  <br /></td></tr>
<tr class="separator:a10dfbb563532866525801626d470654a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a485875ebf5bbab9e634e0f1420b6251b" id="r_a485875ebf5bbab9e634e0f1420b6251b"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a485875ebf5bbab9e634e0f1420b6251b">ansi_char_bright_to_sequence</a> (int ch)</td></tr>
<tr class="memdesc:a485875ebf5bbab9e634e0f1420b6251b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert ansi character code (x? uppercase) to bright ansi sequence. Replacement for the ansiChar_Bright lookup table using colorDefinitions.  <br /></td></tr>
<tr class="separator:a485875ebf5bbab9e634e0f1420b6251b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d695364d336b94905b4f2089ef1efc5" id="r_a0d695364d336b94905b4f2089ef1efc5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0d695364d336b94905b4f2089ef1efc5">ansi_char_to_num</a> (int ch)</td></tr>
<tr class="memdesc:a0d695364d336b94905b4f2089ef1efc5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert ansi character code to numeric values. Replacement for the ansiNum lookup table using colorDefinitions.  <br /></td></tr>
<tr class="separator:a0d695364d336b94905b4f2089ef1efc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af16d1df9b55cf32a2f0260918137c3fc" id="r_af16d1df9b55cf32a2f0260918137c3fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structColorState.html">ColorState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af16d1df9b55cf32a2f0260918137c3fc">ansi_packed_to_colorstate</a> (int packed)</td></tr>
<tr class="memdesc:af16d1df9b55cf32a2f0260918137c3fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert packed ANSI state to <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> structure.  <br /></td></tr>
<tr class="separator:af16d1df9b55cf32a2f0260918137c3fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad27c83243c0056b19d7418d376b90baf" id="r_ad27c83243c0056b19d7418d376b90baf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad27c83243c0056b19d7418d376b90baf">ansi_colorstate_to_packed</a> (<a class="el" href="structColorState.html">ColorState</a> state)</td></tr>
<tr class="memdesc:ad27c83243c0056b19d7418d376b90baf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> structure to packed ANSI state.  <br /></td></tr>
<tr class="separator:ad27c83243c0056b19d7418d376b90baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a326bd8e19a69c35941bd1c1a0f395718" id="r_a326bd8e19a69c35941bd1c1a0f395718"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structColorState.html">ColorState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a326bd8e19a69c35941bd1c1a0f395718">ansi_parse_sequence</a> (const char **ansi_ptr)</td></tr>
<tr class="memdesc:a326bd8e19a69c35941bd1c1a0f395718"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse ANSI escape sequence and return <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a>.  <br /></td></tr>
<tr class="separator:a326bd8e19a69c35941bd1c1a0f395718"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2c4d9cb2f14de250c9cf1be3248b50a0" id="r_a2c4d9cb2f14de250c9cf1be3248b50a0"><td class="memItemLeft" align="right" valign="top"><a id="a2c4d9cb2f14de250c9cf1be3248b50a0" name="a2c4d9cb2f14de250c9cf1be3248b50a0"></a>
<a class="el" href="structColorEntry.html">ColorEntry</a>&#160;</td><td class="memItemRight" valign="bottom"><b>colorDefinitions</b> []</td></tr>
<tr class="separator:a2c4d9cb2f14de250c9cf1be3248b50a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ANSI terminal control helpers and telnet negotiation support. </p>
<dl class="section author"><dt>Author</dt><dd>TinyMUSH development team (<a href="https://github.com/TinyMUSH">https://github.com/TinyMUSH</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>4.0</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (C) 1989-2025 TinyMUSH development team. You may distribute under the terms the Artistic License, as specified in the COPYING file. </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a485875ebf5bbab9e634e0f1420b6251b" name="a485875ebf5bbab9e634e0f1420b6251b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a485875ebf5bbab9e634e0f1420b6251b">&#9670;&#160;</a></span>ansi_char_bright_to_sequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * ansi_char_bright_to_sequence </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert ansi character code (x? uppercase) to bright ansi sequence. Replacement for the ansiChar_Bright lookup table using colorDefinitions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Character to convert (should match lowercase versions) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>const char* Bright ANSI sequence or empty string if not found </dd></dl>

</div>
</div>
<a id="a0d695364d336b94905b4f2089ef1efc5" name="a0d695364d336b94905b4f2089ef1efc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d695364d336b94905b4f2089ef1efc5">&#9670;&#160;</a></span>ansi_char_to_num()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ansi_char_to_num </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert ansi character code to numeric values. Replacement for the ansiNum lookup table using colorDefinitions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>ANSI character </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int ANSI numeric value or 0 if not found </dd></dl>

</div>
</div>
<a id="a10dfbb563532866525801626d470654a" name="a10dfbb563532866525801626d470654a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10dfbb563532866525801626d470654a">&#9670;&#160;</a></span>ansi_char_to_sequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * ansi_char_to_sequence </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>ch</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert ansi character code (x?) to ansi sequence. Replacement for the ansiChar lookup table using colorDefinitions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch</td><td>Character to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>const char* ANSI sequence or empty string if not found </dd></dl>

</div>
</div>
<a id="a18b1d3b66e84fb99814b4bf240f7ba42" name="a18b1d3b66e84fb99814b4bf240f7ba42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18b1d3b66e84fb99814b4bf240f7ba42">&#9670;&#160;</a></span>ansi_ciede2000()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double ansi_ciede2000 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorCIELab.html">ColorCIELab</a></td>          <td class="paramname"><span class="paramname"><em>lab1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structColorCIELab.html">ColorCIELab</a></td>          <td class="paramname"><span class="paramname"><em>lab2</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculates the CIEDE2000 distance between two CIELAB colors. </p>
<p>This function implements the CIEDE2000 formula to measure the perceptual difference between two colors, taking into account luminance, chroma, and hue with advanced corrections.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lab1</td><td>The first CIELAB color. </td></tr>
    <tr><td class="paramname">lab2</td><td>The second CIELAB color. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The CIEDE2000 distance (smaller = more similar). </dd></dl>

</div>
</div>
<a id="ad27c83243c0056b19d7418d376b90baf" name="ad27c83243c0056b19d7418d376b90baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad27c83243c0056b19d7418d376b90baf">&#9670;&#160;</a></span>ansi_colorstate_to_packed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ansi_colorstate_to_packed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorState.html">ColorState</a></td>          <td class="paramname"><span class="paramname"><em>state</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> structure to packed ANSI state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">state</td><td><a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> structure to convert </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Packed ANSI state value </dd></dl>

</div>
</div>
<a id="a925d6c1ab43d953c312a7203a9658cef" name="a925d6c1ab43d953c312a7203a9658cef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a925d6c1ab43d953c312a7203a9658cef">&#9670;&#160;</a></span>ansi_find_closest_color_with_lab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structColorEntry.html">ColorEntry</a> ansi_find_closest_color_with_lab </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorCIELab.html">ColorCIELab</a></td>          <td class="paramname"><span class="paramname"><em>lab</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColorType</td>          <td class="paramname"><span class="paramname"><em>type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the closest ANSI or XTerm color to a given CIELAB color. </p>
<p>Uses CIEDE2000 distance to compare colors and select the best perceptual approximation in the specified palette.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lab</td><td>The target CIELAB color. </td></tr>
    <tr><td class="paramname">type</td><td>The palette type (ColorTypeAnsi or ColorTypeXTerm). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The closest color definition. </dd></dl>

</div>
</div>
<a id="a0e70a884881eb06af93d5ba2a0418c78" name="a0e70a884881eb06af93d5ba2a0418c78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e70a884881eb06af93d5ba2a0418c78">&#9670;&#160;</a></span>ansi_get_color_from_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ansi_get_color_from_index </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>is_background</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the foreground or background color from an XTerm index. </p>
<p>Looks up the corresponding color in the table and updates the state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>Pointer to the color state to modify. </td></tr>
    <tr><td class="paramname">index</td><td>The XTerm index (0-255). </td></tr>
    <tr><td class="paramname">is_background</td><td>true to set background, false for foreground. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3bdc82d815125f5a5a354bee287ddd65" name="a3bdc82d815125f5a5a354bee287ddd65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bdc82d815125f5a5a354bee287ddd65">&#9670;&#160;</a></span>ansi_get_color_from_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ansi_get_color_from_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>name</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>is_background</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the foreground or background color from a color name. </p>
<p>Searches the color table for the name and uses LAB to find the closest ANSI.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>Pointer to the color state to modify. </td></tr>
    <tr><td class="paramname">name</td><td>The color name (e.g. "red", "blue"). </td></tr>
    <tr><td class="paramname">is_background</td><td>true to set background, false for foreground. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a72b1530ed14defc2cef739cfddecf5d4" name="a72b1530ed14defc2cef739cfddecf5d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72b1530ed14defc2cef739cfddecf5d4">&#9670;&#160;</a></span>ansi_get_color_from_rgb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ansi_get_color_from_rgb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structColorRGB.html">ColorRGB</a></td>          <td class="paramname"><span class="paramname"><em>rgb</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>is_background</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the foreground or background color from an RGB color. </p>
<p>Converts the RGB color to perceptually close ANSI and XTerm approximations and updates the color state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>Pointer to the color state to modify. </td></tr>
    <tr><td class="paramname">rgb</td><td>The source RGB color. </td></tr>
    <tr><td class="paramname">is_background</td><td>true to set background, false for foreground. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6d5c4c199abf39e759cbf884c7980e2b" name="a6d5c4c199abf39e759cbf884c7980e2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d5c4c199abf39e759cbf884c7980e2b">&#9670;&#160;</a></span>ansi_get_color_from_text()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ansi_get_color_from_text </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>text</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>is_background</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a hexadecimal or decimal string to set an RGB color. </p>
<p>Supports formats like #RRGGBB, RRGGBB, RRRGGGBBB, etc., and sets the foreground or background color accordingly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>Pointer to the color state to modify. </td></tr>
    <tr><td class="paramname">text</td><td>The string to parse (modified in place). </td></tr>
    <tr><td class="paramname">is_background</td><td>true to set background, false for foreground. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if parsing succeeded, false otherwise. </dd></dl>

</div>
</div>
<a id="af16d1df9b55cf32a2f0260918137c3fc" name="af16d1df9b55cf32a2f0260918137c3fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af16d1df9b55cf32a2f0260918137c3fc">&#9670;&#160;</a></span>ansi_packed_to_colorstate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structColorState.html">ColorState</a> ansi_packed_to_colorstate </td>
          <td>(</td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>packed</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert packed ANSI state to <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">packed</td><td>Packed ANSI state value </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> structure representing the ANSI state </dd></dl>

</div>
</div>
<a id="a4447edd53423a6ecc0a63320eafd3279" name="a4447edd53423a6ecc0a63320eafd3279"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4447edd53423a6ecc0a63320eafd3279">&#9670;&#160;</a></span>ansi_parse_ansi_to_sequences()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ansi_parse_ansi_to_sequences </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>input</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structColorSequence.html">ColorSequence</a> *</td>          <td class="paramname"><span class="paramname"><em>sequences</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a string with ANSI escape sequences and converts it to a <a class="el" href="structColorSequence.html" title="Parsed color sequence information.">ColorSequence</a>. </p>
<p>This function scans the input string for ANSI escape sequences, interprets them to update the color state, and records the color changes in the provided <a class="el" href="structColorSequence.html" title="Parsed color sequence information.">ColorSequence</a>. It also returns the plain text with ANSI codes removed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>The input string containing ANSI sequences. </td></tr>
    <tr><td class="paramname">sequences</td><td>The <a class="el" href="structColorSequence.html" title="Parsed color sequence information.">ColorSequence</a> to populate with color changes. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly allocated string with ANSI sequences removed, or NULL on error.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller is responsible for freeing the returned string and the sequences-&gt;data. </dd></dl>

</div>
</div>
<a id="a577ecea9667560f8636243f0521fbc70" name="a577ecea9667560f8636243f0521fbc70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a577ecea9667560f8636243f0521fbc70">&#9670;&#160;</a></span>ansi_parse_color_from_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ansi_parse_color_from_string </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>color_str</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>is_background</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a complex color string and sets the corresponding color. </p>
<p>Supports color names, hex values, and MUSH code. Handles wrappers like &lt;color&gt; or +color. If '/' is present, the part before is foreground, after is background.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>Pointer to the color state to modify. </td></tr>
    <tr><td class="paramname">color_str</td><td>The string to parse. </td></tr>
    <tr><td class="paramname">is_background</td><td>true to set background, false for foreground (ignored if '/' present). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if parsing succeeded, false otherwise. </dd></dl>

</div>
</div>
<a id="ad914d89313fd7b6468491ab89e57e0ee" name="ad914d89313fd7b6468491ab89e57e0ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad914d89313fd7b6468491ab89e57e0ee">&#9670;&#160;</a></span>ansi_parse_embedded_sequences()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ansi_parse_embedded_sequences </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>input</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structColorSequence.html">ColorSequence</a> *</td>          <td class="paramname"><span class="paramname"><em>sequences</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses embedded ANSI sequences in a string marked with 'x<code>'. </code></p>
<p>Scans the input string for patterns like 'xred' or 'xred/blue', parses the code using ansi_parse_color_from_string, and builds an array of <a class="el" href="structColorSequence.html" title="Parsed color sequence information.">ColorSequence</a> with positions and decoded <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>The input string to parse. </td></tr>
    <tr><td class="paramname">sequences</td><td>Pointer to the array of <a class="el" href="structColorSequence.html" title="Parsed color sequence information.">ColorSequence</a> (allocated by the function). </td></tr>
    <tr><td class="paramname">count</td><td>Pointer to the number of sequences found. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on error (memory allocation failure).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller is responsible for freeing the allocated sequences array. </dd></dl>

</div>
</div>
<a id="a326bd8e19a69c35941bd1c1a0f395718" name="a326bd8e19a69c35941bd1c1a0f395718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a326bd8e19a69c35941bd1c1a0f395718">&#9670;&#160;</a></span>ansi_parse_sequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structColorState.html">ColorState</a> ansi_parse_sequence </td>
          <td>(</td>
          <td class="paramtype">const char **</td>          <td class="paramname"><span class="paramname"><em>ansi_ptr</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse ANSI escape sequence and return <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ansi_ptr</td><td>Pointer to string pointer, will be advanced past the parsed sequence </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> Parsed color state </dd></dl>

</div>
</div>
<a id="a10019119f7dc128e9848f4e04b6ce4f1" name="a10019119f7dc128e9848f4e04b6ce4f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10019119f7dc128e9848f4e04b6ce4f1">&#9670;&#160;</a></span>ansi_parse_single_x_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ansi_parse_single_x_code </td>
          <td>(</td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>input_ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color_out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *</td>          <td class="paramname"><span class="paramname"><em>current_highlight</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a single x color code from the current position. </p>
<p>This function is designed for incremental parsing in <a class="el" href="eval_8c.html#aa8b1b12892bbf3fb39d1e11e646fdfb7" title="Evaluate an expression string in place, expanding substitutions and functions.">eval_expression_string()</a>. It parses one color code starting at *input_ptr and advances the pointer past the consumed characters.</p>
<p>Supported formats:</p><ul>
<li>Bracketed: x&lt;color&gt;, x&lt;color/bgcolor&gt;, x+&lt;color&gt;</li>
<li>Non-bracketed: xr, xh, xn, etc.</li>
<li>Combined: x&lt;red&gt;/&lt;blue&gt;</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input_ptr</td><td>Pointer to pointer to current position (after "%x"). Updated on success. </td></tr>
    <tr><td class="paramname">color_out</td><td>Output <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> structure. Must be initialized by caller. </td></tr>
    <tr><td class="paramname">current_highlight</td><td>Pointer to persistent highlight state tracker. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of characters consumed (&gt;0) on success, 0 if invalid or no code found.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The caller must initialize color_out before calling (typically zero it). </dd>
<dd>
The input_ptr is only advanced on successful parsing. </dd></dl>

</div>
</div>
<a id="a287dfc7f24bd306f6a627a9cec89d06e" name="a287dfc7f24bd306f6a627a9cec89d06e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a287dfc7f24bd306f6a627a9cec89d06e">&#9670;&#160;</a></span>ansi_parse_x_to_sequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * ansi_parse_x_to_sequence </td>
          <td>(</td>
          <td class="paramtype">char **</td>          <td class="paramname"><span class="paramname"><em>ptr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColorType</td>          <td class="paramname"><span class="paramname"><em>type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a x color code and generates the corresponding ANSI escape sequence. </p>
<p>Parses a color code starting from x, advances the pointer, and generates the ANSI sequence based on the specified color type (ANSI, XTerm, TrueColor).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ptr</td><td>Pointer to the string pointer (advanced after parsing). </td></tr>
    <tr><td class="paramname">type</td><td>The color type to generate the sequence for. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly allocated string with the ANSI escape sequence, or NULL on error. </dd></dl>

</div>
</div>
<a id="aedbc240c83b027a81456f399edee9606" name="aedbc240c83b027a81456f399edee9606"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedbc240c83b027a81456f399edee9606">&#9670;&#160;</a></span>ansi_rgb_to_cielab()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structColorCIELab.html">ColorCIELab</a> ansi_rgb_to_cielab </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structColorRGB.html">ColorRGB</a></td>          <td class="paramname"><span class="paramname"><em>color</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts an RGB color to CIELAB color space. </p>
<p>This function applies the sRGB to XYZ transformation then XYZ to CIELAB using the D65 reference white and CIE 1976 formulas.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>The RGB color to convert (values 0-255). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The equivalent color in CIELAB. </dd></dl>

</div>
</div>
<a id="a6f2dfc1be1e8498eede545d0f5f3da3d" name="a6f2dfc1be1e8498eede545d0f5f3da3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f2dfc1be1e8498eede545d0f5f3da3d">&#9670;&#160;</a></span>color_state_to_escape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * color_state_to_escape </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColorType</td>          <td class="paramname"><span class="paramname"><em>type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> to an ANSI escape sequence string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>The <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a> to convert </td></tr>
    <tr><td class="paramname">type</td><td>The ColorType to use for the sequence </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char* Allocated string containing the ANSI escape sequence, or NULL on failure </dd></dl>

</div>
</div>
<a id="af1de5e3964b9254739c4d69c548ff327" name="af1de5e3964b9254739c4d69c548ff327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1de5e3964b9254739c4d69c548ff327">&#9670;&#160;</a></span>color_state_to_letters()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * color_state_to_letters </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a letter code string from a <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>The color state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly allocated string with the letter codes, or NULL on error. </dd></dl>

</div>
</div>
<a id="a94d0aa911d32eef8396b50b0680588e8" name="a94d0aa911d32eef8396b50b0680588e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94d0aa911d32eef8396b50b0680588e8">&#9670;&#160;</a></span>color_state_to_mush_code()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * color_state_to_mush_code </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>color</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates a mushcode string from a <a class="el" href="structColorState.html" title="Complete text formatting state.">ColorState</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">color</td><td>The color state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A newly allocated string with the mushcode, or NULL on error. </dd></dl>

</div>
</div>
<a id="a43b21f23eddfbccf6797676310288e2c" name="a43b21f23eddfbccf6797676310288e2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43b21f23eddfbccf6797676310288e2c">&#9670;&#160;</a></span>to_ansi_escape_sequence()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ColorStatus to_ansi_escape_sequence </td>
          <td>(</td>
          <td class="paramtype">char *</td>          <td class="paramname"><span class="paramname"><em>buffer</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>buffer_size</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structColorState.html">ColorState</a> *</td>          <td class="paramname"><span class="paramname"><em>to</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColorType</td>          <td class="paramname"><span class="paramname"><em>type</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generates an ANSI escape sequence from the color state. </p>
<p>Builds an escape string for attributes and colors according to the specified type. Resets the state after generation if a reset is requested.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>The buffer to write the sequence to. </td></tr>
    <tr><td class="paramname">buffer_size</td><td>The buffer size. </td></tr>
    <tr><td class="paramname">offset</td><td>Pointer to the current offset in the buffer (updated). </td></tr>
    <tr><td class="paramname">to</td><td>The color state to convert. </td></tr>
    <tr><td class="paramname">type</td><td>The sequence type (ANSI, XTerm, TrueColor). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The resulting attribute (Set, Reset, or None). </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
