# TinyMUSH Regression Tests - Other Functions
# Functions: ansipos(), art(), beep(), cat(), die(), foreach(), helptext(), join(), lnum(), lrand(), pos(), rand(), speak(), sql(), strcat(), strlen(), valid(), wordpos()
# Format: command | expected substring

# strlen() - string length
think strlen(hello) | 5
think strlen(This is a test) | 14
think strlen() | 0

# pos() - find substring position (1-based)
think pos(man,superman) | 6
think pos(test,This is a test) | 11
think pos(xyz,hello) | -1

# wordpos() - find which word contains character position
think wordpos(This is a test,1) | 1
think wordpos(This is a test,4) | 1
think wordpos(This is a test,5) | 2
think wordpos(This is a test,6) | 2
think wordpos(This is a test,20) | -1

# cat() - concatenate strings with spaces
think cat(this,is,test) | this is test
think cat(hello,world) | hello world
think strlen(cat(a,b,c,d,e)) | 9

# join() - join strings with delimiter
think join( ,foo,bar,baz) | foo bar baz
think join(-,foo,bar,baz) | foo-bar-baz
think join(@@,foo,bar,baz) | foobarbaz
think join(-,foo,,baz) | foo-baz

# strcat() - concatenate without spaces
think strcat(foo,bar,baz) | foobarbaz
think strlen(strcat(a,b,c)) | 3
think strcat(hello,world) | helloworld

# art() - returns a or an based on vowel
think art(apple) | an
think art(elephant) | an
think art(book) | a
think art(cat) | a
think art(umbrella) | an

# valid() - validate strings
think valid(name,Foobar) | 1
think valid(attrname,Foo) | 1
think valid(attrname,Foo bar) | 0

# beep() - outputs beep character (non-printable, just test execution)
think strlen(beep()) | 1

# speak() - format speech (simple test with quoted speech)
think speak(me,hello) | says
think speak(me,:poses) | poses
think speak(me,test) | says

# rand() - random integer [0, n-1]
think isnum(rand(10)) | 1
think gte(rand(10),0) | 1
think lt(rand(10),10) | 1

# die(times, sides) - sum of dice rolls
think isnum(die(2,6)) | 1
think gte(die(2,6),2) | 1
think lte(die(2,6),12) | 1

# lnum() - numeric lists
think words(lnum(5)) | 4
think first(lnum(5)) | 0
think last(lnum(5)) | 3

think words(lnum(3,7)) | 4
think first(lnum(3,7)) | 3
think last(lnum(3,7)) | 6

# lrand() - list of random integers within bounds
think words(lrand(3,6,5)) | 5
think gte(lmin(lrand(3,6,5)),3) | 1
think lte(lmax(lrand(3,6,5)),6) | 1

# helptext() - docs text length (pre-formatted)
think gt(strlen(helptext(help, say)),0) | 1

# sql() - environment-dependent; intentionally not tested here
