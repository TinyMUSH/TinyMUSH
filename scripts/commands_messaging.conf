# TinyMUSH messaging system tests
# Format: command | expected substring
# Blank lines and lines starting with # are ignored.
# If no expected substring is provided, any non-empty output counts as OK.

# Setup: Create test objects and players
@pcreate TestPlayer=testpass | New player 'TestPlayer'
@create TestObject | TestObject created as object
@dig TestRoom | TestRoom created

# Basic messaging commands tests
@emit Test message from automation | Test message from automation
@eval [pemit(%#,Eval test passed)] | Eval test passed
say Hello world | You say "Hello world"
:waves cheerfully | waves cheerfully
think Private thought test | Private thought test

# @pemit tests
@pemit me=Pemit test message | Pemit test message
@force TestPlayer=@pemit #1=Forced pemit test | Forced pemit test
@npemit me=Npemit test | Npemit test

# @oemit test (sends to others in location except target)
@force TestPlayer=@oemit me=Forced oemit test | Forced oemit test

# Force commands (@femit, @fpose, @fsay)
@femit TestPlayer=Femit test | Femit test
@fpose TestPlayer=waves | TestPlayer waves
@fsay TestPlayer=Forced speech test | TestPlayer says "Forced speech test"

# Page and whisper tests (using @force to simulate connected player)
@force TestPlayer=page #1=Test page message | TestPlayer pages: Test page message
@force TestPlayer=whisper #1=Secret whisper test | TestPlayer whispers "Secret whisper test"
