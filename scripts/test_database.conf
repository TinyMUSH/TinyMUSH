# TinyMUSH database alteration tests
# Format: command | expected substring
# Blank lines and lines starting with # are ignored.
# If no expected substring is provided, any non-empty output counts as OK.

# Setup: Create test player and objects
@pcreate TestUser=testpass | New player 'TestUser'

# Test @create
@create TestObject1 | TestObject1 created as object
@create TestObject2 | TestObject2 created as object

# Test @dig
@dig TestRoom1 | TestRoom1 created
@dig TestRoom2 | TestRoom2 created

# Test @open
@open TestExit=#2 | Opened

# Test @link
@link TestExit=#2 | Linked

# Test @name
@name TestObject1=RenamedObject | Name set.
examine RenamedObject | RenamedObject

# Test @set (flags and attributes)
@set RenamedObject=VISUAL | Set.
@set RenamedObject=TEST:Hello World | Set.
examine RenamedObject | VISUAL
examine RenamedObject/TEST | TEST

# Test @lock and @unlock
@lock RenamedObject==me | Locked.
@unlock RenamedObject | Unlocked.

# Test @clone
@clone RenamedObject | cloned
inventory | RenamedObject

# Test @cpattr (copy attribute)
@set TestObject2=SOURCE:Original | Set.
@cpattr TestObject2/SOURCE=#3/DEST | Set.
examine #3 | DEST

# Test @mvattr (move attribute)
@set TestObject2=MOVE_ME:ToMove | Set.
@mvattr TestObject2=MOVE_ME,MOVED | MOVED
examine TestObject2/MOVED | ToMove

# Test @parent
@create ParentObj | ParentObj created
@set ParentObj=INHERITED:FromParent | Set.
@parent #3=ParentObj | Parent set.
examine #3 | Parent

# Test @chzone
@dig ZoneRoom | ZoneRoom created
@set #5=ZONE | Set.
@dig TestRoom2 | TestRoom2 created
@chzone #6=#5 | Zone changed.

# Test @power (requires wizard)
@power TestUser=Guest | Set.

# Test @chown (do this after other tests that reference RenamedObject)
@teleport #3=#0 | Teleported
@chown #3=TestUser | Owner changed.
examine/owner #3 | TestUser

# Test @unlink
@unlink TestExit | Unlinked.

# Test @robot (create robot player)
@robot RobotPlayer=robotpass | created

# Test @edit (edit attribute)
@set #3=EDIT_TEST:Hello World | Set.
@edit #3/EDIT_TEST=World,Universe | Hello Universe
examine #3/EDIT_TEST | Hello Universe

# Test @wipe (remove attributes)
@wipe #3 | Wiped.

# Test @destroy
@destroy TestObject2 | crumble
