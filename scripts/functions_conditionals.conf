# TinyMUSH Regression Tests - Conditional Functions
# Functions: case(), ifelse(), iffalse(), iftrue(), ifzero(), nonzero(), switch(), switchall(), usefalse(), usetrue()

# ifelse() - Boolean conditional
think ifelse(1,true,false) | true
think ifelse(0,true,false) | false
think ifelse(test,true,false) | true
think ifelse(,true,false) | false
think ifelse(#5,true,false) | true
think ifelse(#-1,true,false) | false
think ifelse(1,one) | one
think ifelse(0,zero) | 

# iftrue() - Boolean with switch token
think iftrue(1,true,false) | true
think iftrue(0,true,false) | false
think iftrue(5,#$) | 5
think iftrue(0,true,#$) | 0

# iffalse() - Inverted iftrue()
think iffalse(0,false,true) | false
think iffalse(1,false,true) | true
think iffalse(0,#$) | 0
think iffalse(5,false,#$) | 5

# nonzero() - Old style conditional (non-zero vs zero)
think nonzero(0,nz,z) | z
think nonzero(1,nz,z) | nz
think nonzero(5,nz,z) | nz
think nonzero(-1,nz,z) | nz
think nonzero(,nz,z) | z

# ifzero() - Inverted nonzero()
think ifzero(0,z,nz) | z
think ifzero(1,z,nz) | nz
think ifzero(5,z,nz) | nz
think ifzero(,z,nz) | z

# usetrue() - Return expression if true, else alternative
think usetrue(1,false) | 1
think usetrue(0,false) | false
think usetrue(hello,empty) | hello
think usetrue(,empty) | empty
think usetrue(test) | test

# usefalse() - Return expression if false, else alternative
think usefalse(0,true) | 0
think usefalse(1,true) | true
think usefalse(,filled) | 
think usefalse(hello,filled) | filled
think usefalse(0) | 0

# switch() - Wildcard pattern matching
think switch(c,*a*,A,*b*,B,*c*,C,*d*,D,E) | C
think switch(f,*a*,A,*b*,B,*c*,C,*d*,D,E) | E
think switch(cab,*a*,A,*b*,B,*c*,C,*d*,D,E) | A
think switch(f,*a*,A,*b*,B,*c*,C,*d*,D) | 
think switch(hello,hel*,YES,NO) | YES
think switch(world,hel*,YES,NO) | NO

# switch() with default
think switch(nomatch,a,res1,b,res2,default) | default
think switch(nomatch,a,res1,b,res2) | 

# switchall() - Match all patterns
think switchall(c,*a*,A,*b*,B,*c*,C,*d*,D,E) | C
think switchall(dab,*a*,A,*b*,B,*c*,C,*d*,D,E) | ABD
think switchall(f,*a*,A,*b*,B,*c*,C,*d*,D,E) | E
think switchall(abc,*a*,A,*b*,B,*c*,C,default) | ABC
think switchall(xyz,*a*,A,*b*,B,*c*,C,*d*,D,default) | default

# case() - Exact case-sensitive match
think case(hello,hello,YES,NO) | YES
think case(HELLO,hello,YES,NO) | NO
think case(world,hello,YES,NO) | NO
think case(a,a,first,b,second,default) | first
think case(b,a,first,b,second,default) | second
think case(c,a,first,b,second,default) | default

# case() with wildcards (should NOT match)
think case(cat,c*t,match,nomatch) | nomatch
think case(hat,*at,match,nomatch) | nomatch

# Nested conditionals
think ifelse(1,ifelse(1,yes,no),false) | yes
think ifelse(0,ifelse(1,yes,no),false) | false
think ifelse(ifelse(1,1,0),true,false) | true

# Boolean values: non-zero numbers are true
think ifelse(42,nonzero is true,nonzero is false) | nonzero is true

# Boolean values: special dbrefs
think ifelse(#0,dbref 0 is true,dbref 0 is false) | dbref 0 is true
think ifelse(#-1,dbref -1 is false,dbref -1 is true) | dbref -1 is true

# switch() with #$ token
think switch(hello,*e*,contains e: #$,other) | contains e: hello
think switch(test,t*,starts with t: #$,ends with t: #$,other) | starts with t: test

# case() no match returns empty
think case(notfound,a,1,b,2) | 

# Multiple switches
think switch(5,1,one,2,two,3,three,other) | other
think switch(2,1,one,2,two,3,three,other) | two

# Edge cases: question mark wildcard
think switch(c,?,match,nomatch) | match
think switch(cat,c?,match,nomatch) | match
think switch(ca,c?,match,nomatch) | match

# Edge cases: combining wildcards
think switch(abcdef,a*f,match,nomatch) | match
think switch(abcdef,a?cdef,match,nomatch) | match
think switch(abcdef,a?cde?,match,nomatch) | match

# nonzero vs ifzero with negative numbers
think nonzero(-5,nz,z) | nz
think ifzero(-5,z,nz) | nz

# switch() with multiple matching patterns - should return first match
think switch(test,t*,first,*e*,second,default) | first
think switch(test,*e*,first,t*,second,default) | first

# case() edge cases
think case(ABC,abc,match,nomatch) | nomatch
think case(abc,ABC,match,nomatch) | nomatch
think case(123,123,match,nomatch) | match

# usefalse with numbers
think usefalse(0,false_alternative) | 0
think usefalse(1,false_alternative) | false_alternative
think usefalse(5,false_alternative) | false_alternative

# usetrue with numbers
think usetrue(0,true_alternative) | true_alternative
think usetrue(1,true_alternative) | 1
think usetrue(5,true_alternative) | 5

# ifelse with various boolean values
think ifelse(#10,true,false) | true
think ifelse(#-5,true,false) | false
think ifelse(foo,true,false) | true
think ifelse(0,true,false) | false

# switch() no default - no match returns empty
think switch(nomatch,a,res1) | 
think switch(xyz,x,res1) | 
think switch(test,te*,found) | found

# Deeply nested switch
think switch(a,a,switch(b,b,nested_match,nested_fail),outer_fail) | nested_match

# Case sensitivity in patterns
think case(Hello,hello,match,nomatch) | nomatch
think case(HELLO,HELLO,match,nomatch) | match

# switchall with no matches returns default
think switchall(xyz,a,A,b,B,default) | default

# switch with expressions
think switch(5,1,one,2,two,add(2,3),five,other) | five
